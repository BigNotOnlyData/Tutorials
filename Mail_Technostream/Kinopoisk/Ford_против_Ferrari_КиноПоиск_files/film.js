(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"+1kG":function(e,t){},"+6sO":function(e,t,i){e.exports={dropdownMenu:"styles_dropdownMenu__2cZkM"}},"1vmJ":function(e,t,i){"use strict";i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return d})),i.d(t,"c",(function(){return r}));var n=i("0D0S"),a=i.n(n),o=i("5QFK"),r="user-reviews",l=a()().publicRuntimeConfig,s="filmPage",d=l.isTouchMoviePageEnabled?[o.PagePlatforms.Desktop,o.PagePlatforms.Touch]:[o.PagePlatforms.Desktop]},"8n7h":function(e,t,i){e.exports={controlContainer:"styles_controlContainer__1ixcB",foldersMenu:"styles_foldersMenu__2GYEz",watchedButton:"styles_watchedButton__1iTwq",share:"styles_share__2dB6D",feedbackButtons:"styles_feedbackButtons__gdjI7",mainTrailerPreviewInfo:"styles_mainTrailerPreviewInfo__2t1CC"}},B277:function(e,t,i){"use strict";i.d(t,"a",(function(){return n.a})),i.d(t,"d",(function(){return o})),i.d(t,"c",(function(){return r})),i.d(t,"g",(function(){return l})),i.d(t,"e",(function(){return s})),i.d(t,"h",(function(){return d.b})),i.d(t,"b",(function(){return d.a})),i.d(t,"i",(function(){return d.c})),i.d(t,"k",(function(){return d.d})),i.d(t,"f",(function(){return c.a})),i.d(t,"j",(function(){return u}));var n=i("o4DS"),a=i("kdn0"),o=Object(a.a)(n.a.FetchInitialProps),r=Object(a.a)(n.a.AddBlocksConfig),l=Object(a.a)(n.a.SetFolderEffect),s=Object(a.a)(n.a.SetUserReviewVoteEffect),d=i("amtH"),c=i("i2v3"),u=Object(a.a)(n.a.FilmNoteSubmitEffect)},CMsO:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return Gn}));var n,a=i("cxan"),o=i("HbGN"),r=i("cDcd"),l=i.n(r),s=i("uDfI"),d=i("MRcq"),c=i("dUAz"),u=i("IEND"),v=i("YfWb"),m=i("b6uz"),f=i("VtSi"),p=i.n(f),b=i("5QFK"),k=i("GaWJ"),g=i("ZmC0"),O=i("dOIt"),y=i("xNSc"),I=i("34P0"),S=function(e){var t,i=Object(y.d)({errors:null===e||void 0===e?void 0:e.errors,errorType:I.GraphqlErrorsTypes.NotFound,path:"tvSeries"});return Boolean((null===e||void 0===e?void 0:null===(t=e.data.tvSeries)||void 0===t?void 0:t.id)&&!i)},j=i("wZH4"),h=i("sYvi"),R=i("3J3H"),w=i("H/7H"),N=i("fGyu"),T=i("zygG"),F=i("6BAR"),_=i("w++g"),E=i("2o2g"),C=i("C9RK"),M=function(e){var t,i=Object(E.a)(C.FILM_TRIVIAS_QUERY,{variables:e}),n=Object(T.a)(i,2),a=n[0],o=n[1],r=o.data,s=o.fetchMore;return[a,l.a.useCallback((function(){var e,t;o.fetchMore({variables:{triviasOffset:(null===r||void 0===r?void 0:null===(e=r.film)||void 0===e?void 0:null===(t=e.trivias.items)||void 0===t?void 0:t.length)||0,triviasLimit:_.TRIVIAS_CHUNK_SIZE},updateQuery:function(e,t){var i,n=t.fetchMoreResult;return(null===n||void 0===n?void 0:null===(i=n.film)||void 0===i?void 0:i.trivias.items)?Object(F.a)(n,(function(t){var i,n;(null===(i=t.film)||void 0===i?void 0:i.trivias.items)&&(t.film.trivias.items=[].concat(Object(N.a)((null===(n=e.film)||void 0===n?void 0:n.trivias.items)||[]),Object(N.a)(t.film.trivias.items)))})):e}})}),[s,null===r||void 0===r?void 0:null===(t=r.film)||void 0===t?void 0:t.trivias.offset]),o]},x=i("d/yK"),D={kind:"Document",definitions:function(e){var t={};return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var i=e.name.value;return!t[i]&&(t[i]=!0,!0)}))}([{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FilmTouchRating"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filmId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withUserData"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"film"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"filmId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"top250"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"expectation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isActive"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"imdb"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isActive"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"kinopoisk"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isActive"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"russianCritics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isActive"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"worldwideCritics"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"percent"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isActive"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"positiveCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"negativeCount"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"reviewCount"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isActive"},arguments:[],directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"usersReviewsPositive"},name:{kind:"Name",value:"userReviews"},arguments:[{kind:"Argument",name:{kind:"Name",value:"types"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"POSITIVE"}]}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"0"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]}]}},{kind:"Field",alias:{kind:"Name",value:"usersReviewsNeutral"},name:{kind:"Name",value:"userReviews"},arguments:[{kind:"Argument",name:{kind:"Name",value:"types"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"NEUTRAL"}]}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"IntValue",value:"0"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"FilmUserData"},directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withUserData"}}}]}]}]}}]}}].concat([{kind:"FragmentDefinition",name:{kind:"Name",value:"FilmUserData"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Film"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userData"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"folders"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"voting"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"votedAt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"expectation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"note"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"makeDate"},arguments:[],directives:[]}]}}]}}]}}])),loc:{start:0,end:1344,source:{body:"\n    query FilmTouchRating($filmId: Long!, $withUserData: Boolean = false) {\n        film(id: $filmId) {\n            id\n            top250\n            rating {\n                expectation {\n                    value\n                    count\n                    isActive\n                }\n                imdb {\n                    value\n                    count\n                    isActive\n                }\n                kinopoisk {\n                    value\n                    count\n                    isActive\n                }\n                russianCritics {\n                    value\n                    count\n                    isActive\n                }\n                worldwideCritics {\n                    value\n                    percent\n                    count\n                    isActive\n                    positiveCount\n                    negativeCount\n                }\n                reviewCount {\n                    value\n                    count\n                    isActive\n                }\n            }\n            usersReviewsPositive: userReviews(types: [POSITIVE], limit: 0) {\n                total\n            }\n            usersReviewsNeutral: userReviews(types: [NEUTRAL], limit: 0) {\n                total\n            }\n            ...FilmUserData @include(if: $withUserData)\n        }\n    }\n    \n",name:"GraphQL request",locationOffset:{line:1,column:1}}}},P=i("amtH"),B=i("i2v3"),A=i("wjxZ"),U=function(e){return e&&function(e){return Boolean(e&&(e<1970||e>(new Date).getFullYear()-5))}(e)?e.toString():void 0},L=function(e){var t=e.title,i=e.isAvailableOnline,n=e.hasReviews,a=e.year,o=Object(r.useMemo)((function(){return U(a)}),[a]),l=Object(r.useMemo)((function(){return(null===t||void 0===t?void 0:t.russian)||(null===t||void 0===t?void 0:t.original)}),[t]),s=Object(r.useMemo)((function(){return function(e,t){var i=[];return e&&i.push("\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u043e\u043d\u043b\u0430\u0439\u043d"),t||i.push("\u0442\u0440\u0435\u0439\u043b\u0435\u0440\u044b, \u0434\u0430\u0442\u044b \u043f\u0440\u0435\u043c\u044c\u0435\u0440"),i.length?i.join(", "):void 0}(i,n)}),[i,n]);if(l)return[o?"".concat(l," (").concat(o,")"):"".concat(l),s,"\u041a\u0438\u043d\u043e\u041f\u043e\u0438\u0441\u043a"].filter(Boolean).join(" \u2013 ")},V=i("LLMW"),z=i("+3Fg"),W=i("DYnI");!function(e){e.Page="page",e.BaseFilmInfo="baseFilmInfo",e.MainSection="mainSection",e.SideSection="sideSection",e.AdditionalInformation="additionalInformation"}(n||(n={}));var q,Y=i("zjfJ"),H=i("O94r"),K=i.n(H),Q=i("7JmY"),Z="\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0414\u0430\u043b\u044c\u043d\u0435\u0439\u0448\u0438\u0439 \u0441\u043f\u0438\u0441\u043e\u043a \u0444\u0430\u043a\u0442\u043e\u0432 \u043e \u0444\u0438\u043b\u044c\u043c\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u0442 \u0441\u043f\u043e\u0439\u043b\u0435\u0440\u044b. \u0411\u0443\u0434\u044c\u0442\u0435 \u043e\u0441\u0442\u043e\u0440\u043e\u0436\u043d\u044b.",G="\u041e\u0448\u0438\u0431\u043a\u0438 \u0432 \u0444\u0438\u043b\u044c\u043c\u0435",J="\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0421\u043f\u0438\u0441\u043e\u043a \u043e\u0448\u0438\u0431\u043e\u043a \u0432 \u0444\u0438\u043b\u044c\u043c\u0435 \u043c\u043e\u0436\u0435\u0442 \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0441\u043f\u043e\u0439\u043b\u0435\u0440\u044b. \u0411\u0443\u0434\u044c\u0442\u0435 \u043e\u0441\u0442\u043e\u0440\u043e\u0436\u043d\u044b.",$="\u0424\u0438\u043b\u044c\u043c\xa0\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430",X="\u0415\u0441\u043b\u0438 \u0432\u0430\u043c \u043f\u043e\u043d\u0440\u0430\u0432\u0438\u043b\u0441\u044f \u044d\u0442\u043e\u0442 \u0444\u0438\u043b\u044c\u043c",ee="\u041f\u043e\u0445\u043e\u0436\u0438\u0435",te="\u0412 \u0422\u043e\u043f 250 \u0444\u0438\u043b\u044c\u043c\u043e\u0432",ie=i("V2y5"),ne=i("CeW+"),ae=i("YhMw"),oe=i("GGMx"),re=i("9T5q");!function(e){e.OnlyIcon="onlyIcon",e.Compact="darkCompact",e.Full="full"}(q||(q={}));var le,se,de,ce,ue,ve="\u0411\u0438\u043b\u0435\u0442\u044b",me="\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0438 \u0431\u0438\u043b\u0435\u0442\u044b",fe=i("ESI9"),pe=i.n(fe),be=l.a.createElement,ke=(le={},Object(Y.a)(le,Q.BlocksColorSchemes.Dark,pe.a.rootInDark),Object(Y.a)(le,Q.BlocksColorSchemes.Light,pe.a.rootInLight),Object(Y.a)(le,Q.BlocksColorSchemes.Grey,pe.a.rootInLight),le),ge=(se={},Object(Y.a)(se,q.OnlyIcon,null),Object(Y.a)(se,q.Compact,ve),Object(Y.a)(se,q.Full,me),se),Oe=function(e){var t=e.className,i=e.buttonType,n=e.url,a=e.colorScheme;return be("a",{href:n,className:K()(t,ke[a],i===q.OnlyIcon&&pe.a.onlyIcon),"data-tid":"225d8e88"},be("i",{className:pe.a.ticketIcon}),ge[i])},ye=i("rQ1F"),Ie=function(e){return l.a.useMemo((function(){return e?e.reduce((function(e,t){return(null===t||void 0===t?void 0:t.person)?(e.push(t.person),e):e}),[]):[]}),[e])},Se=l.a.createElement,je=Object(r.memo)(_.MovieCrew),he=function(e){var t=e.filmId,i=e.className,n=e.actors,a=e.voiceOverActors,o=Ie(null===n||void 0===n?void 0:n.items),r=Ie(null===a||void 0===a?void 0:a.items),s=l.a.useMemo((function(){return k.routes.getUrl(k.FilmRoutesName.Cast,{id:t})}),[t]),d=l.a.useMemo((function(){return k.routes.getUrl(k.RoutesNames.VoiceOverCast,{id:t})}),[t]),c=Object(Q.useElementColorScheme)(),u=Object(ye.usePreviewCardPopover)({entityType:"Person",colorScheme:c}),v=u.handleOpenPopover,m=u.handleClosePopover;return Se(je,{className:i,actors:o,actorsTotal:null===n||void 0===n?void 0:n.total,moreActorsUrl:s,voiceOverActors:r,voiceOverActorsTotal:null===a||void 0===a?void 0:a.total,moreVoiceOverActorsUrl:d,onActorMouseEnter:v,onActorMouseLeave:m})},Re=i("j/kK"),we=l.a.createElement,Ne=Object(r.memo)(Re.b),Te=function(e){var t=Object(Q.useColorScheme)();return we(Ne,Object(a.a)({},e,{colorScheme:t}))},Fe=i("H7E3"),_e=l.a.createElement,Ee=function(e){var t=function(e){var t,i,n,a,o,r,l,s,d,c,u,v,m;return e?[{id:"year",title:_.tableDictionary.year,renderer:Q.SingleLinkColumnRenderer,value:Object(Re.d)(e.productionYear)},{id:"countries",title:_.tableDictionary.countries,renderer:Q.LinkArrayColumnRenderer,value:Object(_.transformCountries)("films",e.countries)},{id:"genres",title:_.tableDictionary.genres,renderer:_.GenresColumnRenderer,value:Object(_.transformGenres)(e.id,e.genres,Boolean((null===(t=e.keywords)||void 0===t?void 0:t.total)&&(null===(i=e.keywords)||void 0===i?void 0:i.total)>0),"films")},{id:"tagline",title:_.tableDictionary.tagline,renderer:Q.PlainTextColumnRenderer,value:Object(_.transformTagLine)(e.tagline)},{id:"directors",title:_.tableDictionary.directors,renderer:ye.MembersColumnRendererWithPopoverContainer,value:Object(_.transformMember)(e.id,e.directors,"director")},{id:"writers",title:_.tableDictionary.writers,renderer:ye.MembersColumnRendererWithPopoverContainer,value:Object(_.transformMember)(e.id,e.writers,"writer")},{id:"producers",title:Object(_.presentProducerTitle)(e.countries),renderer:ye.MembersColumnRendererWithPopoverContainer,value:Object(_.transformMember)(e.id,e.producers,"producer")},{id:"operators",title:_.tableDictionary.operators,renderer:ye.MembersColumnRendererWithPopoverContainer,value:Object(_.transformMember)(e.id,e.operators,"operator"),degradationIfEmpty:!0},{id:"composers",title:_.tableDictionary.composers,renderer:ye.MembersColumnRendererWithPopoverContainer,value:Object(_.transformMember)(e.id,e.composers,"composer")},{id:"designers",title:_.tableDictionary.designers,renderer:ye.MembersColumnRendererWithPopoverContainer,degradationIfEmpty:!0,value:Object(_.transformUniqueMember)(e.id,e.designers,"design")},{id:"filmEditors",title:_.tableDictionary.filmEditors,renderer:ye.MembersColumnRendererWithPopoverContainer,degradationIfEmpty:!0,value:Object(_.transformMember)(e.id,e.filmEditors,"editor")},{id:"budget",title:_.tableDictionary.budget,renderer:Q.SingleLinkColumnRenderer,degradationIfEmpty:!0,value:Object(_.transformBudget)(e.id,null===(n=e.boxOffice)||void 0===n?void 0:n.budget)},{id:"marketing",title:_.tableDictionary.marketing,renderer:Q.SingleLinkColumnRenderer,degradationIfEmpty:!0,value:Object(_.transformBudget)(e.id,null===(a=e.boxOffice)||void 0===a?void 0:a.marketing)},{id:"usaBox",title:_.tableDictionary.usaBox,renderer:Q.SingleLinkColumnRenderer,degradationIfEmpty:!0,value:Object(_.transformBudget)(e.id,null===(o=e.boxOffice)||void 0===o?void 0:o.usaBox)},{id:"worldBox",title:_.tableDictionary.worldBox,renderer:_.WorldBoxColumnRenderer,degradationIfEmpty:!0,value:Object(_.transformWorldBox)(e.id,null===(r=e.boxOffice)||void 0===r?void 0:r.worldBox,null===(l=e.boxOffice)||void 0===l?void 0:l.usaBox)},{id:"audience",title:_.tableDictionary.audience,renderer:_.AudienceColumnRenderer,degradationIfEmpty:!0,value:Object(_.transformAudience)(e.id,e.audience)},{id:"rusBox",title:_.tableDictionary.rusBox,renderer:Q.SingleLinkColumnRenderer,degradationIfEmpty:!0,value:Object(_.transformBudget)(e.id,null===(s=e.boxOffice)||void 0===s?void 0:s.rusBox)},{id:"ruPremiere",title:_.tableDictionary.ruPremiereDate,renderer:_.ReleaseOptionsRenderer,degradationIfEmpty:!0,value:Object(_.transformRuPremiere)(e.id,e.distribution.rusRelease,e.releaseOptions)},{id:"worldPremieres",title:_.tableDictionary.worldPremieres,renderer:Q.LinkArrayColumnRenderer,degradationIfEmpty:!0,value:Object(_.transformWorldPremieres)(e.id,null===(d=e.premieres)||void 0===d?void 0:d.total,e.worldPremiere)},{id:"reRelease",title:_.tableDictionary.reRelease,renderer:Q.LinkArrayColumnRenderer,degradationIfEmpty:!0,value:Object(_.transformReReleasePremiere)(e.id,null===(c=e.distribution)||void 0===c?void 0:c.reRelease)},{id:"digitalRelease",title:_.tableDictionary.digitalRelease,renderer:Q.LinkArrayColumnRenderer,degradationIfEmpty:!0,value:Object(_.transformDigitalPremiere)(e.id,null===(u=e.distribution)||void 0===u?void 0:u.digitalRelease)},{id:"dvdRelease",title:_.tableDictionary.dvdRelease,renderer:Q.PlainTextColumnRenderer,degradationIfEmpty:!0,value:Object(_.transformRelease)(e.releases,x.n.Dvd)},{id:"blueRayRelease",title:_.tableDictionary.blueRayRelease,renderer:Q.PlainTextColumnRenderer,degradationIfEmpty:!0,value:Object(_.transformRelease)(e.releases,x.n.Bluray)},{id:"ageRestriction",title:_.tableDictionary.ageRestriction,renderer:Q.RestrictionColumnRenderer,degradationIfEmpty:!0,value:Object(_.transformAgeRestriction)(null===(v=e.restriction)||void 0===v?void 0:v.age)},{id:"ratingMPAA",title:_.tableDictionary.ratingMPAA,renderer:Q.RestrictionColumnRenderer,degradationIfEmpty:!0,value:Object(_.transformMpaaRestriction)(e.id,null===(m=e.restriction)||void 0===m?void 0:m.mpaa)},{id:"duration",title:_.tableDictionary.duration,renderer:Q.PlainTextColumnRenderer,value:Object(_.transformDuration)(e.duration)}]:[]}(e.film);return _e(Q.EncyclopedicTableContainer,{rowData:t})},Ce=i("92Fn"),Me=i("aJtV"),xe=i("bLRs"),De=i("AJtZ"),Pe=i("QYI6"),Be=l.a.createElement,Ae=function(e){var t,i=e.filmId,n=e.userData,a=Object(Q.useColorScheme)(),o=Object(s.useDispatch)(),d=Object(r.useCallback)((function(e){o(Object(O.setFilmUserRatingEffect)({filmId:i,value:e,rollbackVote:null===n||void 0===n?void 0:n.voting}))}),[o,i,null===n||void 0===n?void 0:n.voting]),c=l.a.useCallback((function(){o(Object(O.deleteFilmUserRatingEffect)({filmId:i,rollbackVote:null===n||void 0===n?void 0:n.voting}))}),[o,i,null===n||void 0===n?void 0:n.voting]);return Be(De.MovieKinopoiskRatingSnippet,{colorScheme:a,userVotingValue:null===n||void 0===n?void 0:null===(t=n.voting)||void 0===t?void 0:t.value,onVote:d,onVoteDelete:c})},Ue=i("OMzU"),Le=i("1vmJ"),Ve=l.a.createElement,ze=function(e){var t=e.userReviewsTotal,i=Object(Q.useColorScheme)(),n=Object(Ue.a)({id:Le.c,isSmooth:!1});return Ve(De.UserReviewsLink,{colorScheme:i,userReviewsTotal:t,onReviewClick:n})},We=i("mGvo"),qe=i.n(We),Ye=l.a.createElement,He=function(e){var t=e.filmId,i=e.activeText,n=e.notActiveText,r=e.voting,d=Object(o.a)(e,["filmId","activeText","notActiveText","voting"]),c=Object(s.useDispatch)(),u=qe()(null===r||void 0===r?void 0:r.value),v=Boolean(null===r||void 0===r?void 0:r.value),m=l.a.useMemo((function(){return u&&i?i:!u&&n?n:void 0}),[u,i,n]),f=l.a.useCallback((function(){c(Object(O.setFilmWatchedEffect)({filmId:t,rollbackVote:r}))}),[c,r]),p=l.a.useCallback((function(){c(Object(O.unsetFilmWatchedEffect)({filmId:t,rollbackVote:r}))}),[c,r]);return Ye(re.MovieWatchedButtonContainer,Object(a.a)({onWatch:f,onUnwatch:p,buttonText:m,isFilmWatched:u,hasUserRating:v},d))},Ke=l.a.createElement,Qe=function(e){var t=e.className,i=e.filmId,n=e.rating,a=e.userData,o=e.userReviewsTotal,r=Object(Q.useColorScheme)(),l=Object(De.getRatingForHeaderBlock)(n);return Ke(_.MovieHeaderRatingBlock,{className:t,renderRating:function(){return l&&Ke(Pe.a,{movieId:i,type:l.type,rating:l.rating,size:De.FilmRatingSizes.Md,valueDigits:1})},renderRatingLabel:function(){return(null===l||void 0===l?void 0:l.type)===b.RatingTypes.Expectation?Ke(De.MovieExpectationRatingSnippet,{colorScheme:r}):null},renderWatchedButton:function(e){var t=e.className;return(null===l||void 0===l?void 0:l.type)===b.RatingTypes.Kinopoisk&&Ke(He,{filmId:i,className:t,voting:null===a||void 0===a?void 0:a.voting})},renderKinopoiskRatingSnippet:function(){return(null===l||void 0===l?void 0:l.type)===b.RatingTypes.Kinopoisk?Ke(Ae,{filmId:i,userData:a}):null},renderReviewsLink:function(){return(null===l||void 0===l?void 0:l.type)===b.RatingTypes.Kinopoisk?Ke(ze,{userReviewsTotal:o}):null}})},Ze=l.a.createElement,Ge=function(e){var t=e.filmId,i=e.className,n=e.buttonType,a=Object(Q.useColorScheme)(),o=k.routes.getUrl(k.AfishaRoutes.BuyTicket,{filmId:t});return Ze(Oe,{url:o,className:i,buttonType:n,colorScheme:a})},Je=l.a.createElement,$e=function(e){var t=e.film,i=Object(Q.useColorScheme)();return Je(_.ContentProductionStatus,{status:t.productionStatus,updateDate:t.productionStatusUpdateDate,colorScheme:i})},Xe=i("B277"),et=i("c4hu"),tt=i("yW1d"),it=i("WZ32"),nt=l.a.createElement,at=function(e){var t=e.movieId,i=Object(Q.useColorScheme)(),n=Object(s.useSelector)((function(e){return Object(it.e)(e,{entityId:t})}));if(!(null===n||void 0===n?void 0:n.isAvailableOnline))return null;var a=n.descriptionText,o=n.descriptionSubtext,r=n.descriptionIconsUrls;return nt(tt.WatchOnlineButtonDescription,{text:a,subtext:o,iconsUrls:r,colorScheme:et.a[i],alignment:tt.WatchOnlineButtonDescriptionAlignments.Left})},ot=i("azYU"),rt=i("u40r"),lt=i("VJ21"),st=i.n(lt),dt=l.a.createElement,ct=Object(z.withZone)(n.MainSection)((function(e){var t,i,n,a,o,r,s,d,c,u,v=e.className,m=e.film,f=Object(Q.useColorScheme)();return dt(_.MovieBasicInfoLayout,{className:v,header:dt(l.a.Fragment,null,dt("div",{className:st.a.productionStatus,"data-tid":"7e60689c"},dt($e,{film:m})),dt(Te,{className:st.a.title,film:m}),dt("div",{className:st.a.hdContainer,"data-tid":"7e60689c"},dt("div",{className:st.a.buttonsAndDescriptionContainer},(null===(t=m.onlineViewOptions)||void 0===t?void 0:t.isAvailableOnline)?dt(ot.a,null,m.shortDescription):null,dt("div",{className:st.a.buttonsContainer},dt(Me.a,{className:st.a.watchOnlineButton,ott:null===m||void 0===m?void 0:m.ott,onlineViewOptions:null===m||void 0===m?void 0:m.onlineViewOptions}),m.isTicketsAvailable?dt(Ge,{filmId:m.id,buttonType:f===Q.BlocksColorSchemes.Dark?q.Compact:q.Full}):null),dt("div",{className:st.a.watchOnlineDescription},dt(at,{movieId:m.id})),dt(Ce.a,{streamItems:null===(i=m.ott)||void 0===i?void 0:null===(n=i.preview)||void 0===n?void 0:null===(a=n.streams)||void 0===a?void 0:a.items})))),rating:dt(Qe,{className:st.a.filmRating,filmId:m.id,rating:m.rating,userReviewsTotal:null===(o=m.userReviews)||void 0===o?void 0:o.total,userData:m.userData}),table:dt(l.a.Fragment,null,dt(Q.SectionTitleContainer,{className:st.a.tableHeader,title:re.dictionary.aboutFilm,size:Q.SectionTitleSizes.Sm}),dt(Ee,{film:m})),crew:dt(he,{className:st.a.filmCrew,filmId:m.id,actors:m.actors,voiceOverActors:m.voiceOverActors}),awards:(null===(r=m.filmMainAward)||void 0===r?void 0:r.items)?dt(xe.a,{className:st.a.awards,movieId:m.id,items:m.filmMainAward.items,total:(null===(s=m.filmAwardWins)||void 0===s?void 0:s.total)||m.filmMainAward.total,isWinner:Boolean(null===(d=m.filmAwardWins)||void 0===d?void 0:d.total)}):null,sequelsPrequels:dt(rt.a,{className:st.a.sequelsPrequels,movieId:m.id,movie:m,moviesTotal:(null===(c=m.sequelsPrequels)||void 0===c?void 0:c.total)||0}),userNote:dt(Fe.a,{movieId:m.id,note:null===m||void 0===m?void 0:null===(u=m.userData)||void 0===u?void 0:u.note,className:st.a.userNote,onSubmitEffect:Xe.j})})})),ut=i("4qUK"),vt=i("3ANj"),mt=i("7xIC"),ft=l.a.createElement,pt=function(e){var t=function(t){var i=Object(mt.useRouter)(),n=Number(i.query.id);return n?ft(e,Object(a.a)({},t,{filmId:n})):null},i=e.displayName||e.name||"Component";return t.displayName="WithFilmId(".concat(i,")"),t},bt=i("3+Un"),kt=i("vPLW"),gt=i("B6j3"),Ot=l.a.createElement,yt=Object(r.memo)(gt.c),It=function(e){var t,i,n,r=e.filmId,l=e.blockMeta,s=l.index,d=l.type,c=e.className,u=Object(o.a)(e,["filmId","blockMeta","className"]),v=M({filmId:r,triviasType:x.o.Fact,triviasLimit:_.TRIVIAS_INITIAL_CHUNK_SIZE}),m=Object(T.a)(v,3),f=m[0],p=m[1],b=m[2],k=b.data,g=b.error,O=Object(bt.b)(null===k||void 0===k?void 0:null===(t=k.film)||void 0===t?void 0:null===(i=t.trivias)||void 0===i?void 0:i.items);return Ot(kt.a,{placeholder:Ot(gt.d,null),onLoad:f,isLoaded:Boolean(k||g)},O&&Boolean(O.length)&&Ot(ut.BlockAnalyticsContainer,{blockId:d,position:s+1},Ot(yt,Object(a.a)({},u,{spoilerWarningPlateText:Z,className:c,onClick:p,facts:O,factsTotal:null===k||void 0===k?void 0:null===(n=k.film)||void 0===n?void 0:n.trivias.total}))))},St=l.a.createElement,jt=Object(r.memo)(gt.b),ht=function(e){var t,i,n,r=e.filmId,l=e.blockMeta,s=l.index,d=l.type,c=e.className,u=Object(o.a)(e,["filmId","blockMeta","className"]),v=M({filmId:r,triviasType:x.o.Blooper,triviasLimit:_.TRIVIAS_INITIAL_CHUNK_SIZE}),m=Object(T.a)(v,3),f=m[0],p=m[1],b=m[2],k=b.data,g=b.error,O=Object(bt.b)(null===k||void 0===k?void 0:null===(t=k.film)||void 0===t?void 0:null===(i=t.trivias)||void 0===i?void 0:i.items);return St(kt.a,{placeholder:St(gt.d,null),onLoad:f,isLoaded:Boolean(k||g)},O&&Boolean(O.length)&&St(ut.BlockAnalyticsContainer,{blockId:d,position:s+1},St(jt,Object(a.a)({},u,{title:G,spoilerWarningPlateText:J,className:c,onClick:p,bloopers:O,bloopersTotal:null===k||void 0===k?void 0:null===(n=k.film)||void 0===n?void 0:n.trivias.total}))))},Rt=i("0D0S"),wt=i.n(Rt),Nt=i("eowz"),Tt=i("iGtG"),Ft=l.a.createElement,_t=wt()().publicRuntimeConfig,Et=function(e){var t,i,n,a,o,l=e.filmId,d=e.className,c=e.blockMeta,u=c.type,v=c.index,m=Object(s.useSelector)(w.selectIsAuthorized),f=Object(s.useDispatch)(),p=Object(r.useCallback)((function(){return f(Object(Nt.loginEffect)())}),[f,m]),g=Object(E.a)(Tt.a,{variables:{filmId:l,similarMoviesLimit:_.SIMILAR_MOVIES_LIMIT,withUserData:m}}),O=Object(T.a)(g,2),y=O[0],I=O[1],S=I.data,j=I.error,h=Object(Q.useViewportSize)(),R=(null!==(t=Object(bt.b)(null===S||void 0===S?void 0:null===(i=S.film)||void 0===i?void 0:null===(n=i.userRecommendations)||void 0===n?void 0:n.items))&&void 0!==t?t:[]).filter((function(e){return Boolean(null===e||void 0===e?void 0:e.movie)})),N=Object(re.transformUserRecomendationsToMoviePoster)(R),F=Object(r.useMemo)((function(){return"".concat(_t.kinopoiskApiHost).concat(k.routes.getUrl(k.FilmRoutesName.RecommendMoreMovies,{id:l}))}),[l]);return h===b.ViewportSizes.Small&&0===N.length?null:Ft(kt.a,{onLoad:y,isLoaded:Boolean(S||j),placeholder:Ft(re.MovieCarouselSkeleton,{itemsCount:5,viewportSize:h})},Ft(ut.BlockAnalyticsContainer,{blockId:u,position:v+1},Ft(_.SimilarMoviesBlock,{movieId:l,className:d,viewportSize:h,total:(null===S||void 0===S?void 0:null===(a=S.film)||void 0===a?void 0:null===(o=a.userRecommendations)||void 0===o?void 0:o.total)||0,movies:N,isAuthorized:m,onUnauthorizedRecommendMoreClick:p,recommendModalIframeSrc:F,title:h===b.ViewportSizes.Small?ee:X})))},Ct=l.a.createElement,Mt=function(e){var t=function(e){var t,i,n,a,o,r,l,s,d,c;return e?[{id:"about",title:_.dictionary.navigationMenuAbout,status:Q.NavigationTabsMenuItemStatus.Active},{id:"awards",title:_.dictionary.navigationMenuAwards,url:k.routes.getUrl(k.FilmRoutesName.AwardsPage,{id:e.id}),status:Object(_.getNavigationMenuItemStatusByTotal)(null===(t=e.awards)||void 0===t?void 0:t.total)},{id:"premieres",title:_.dictionary.navigationMenuPremieres,url:k.routes.getUrl(k.FilmRoutesName.PremieresPage,{id:e.id}),status:Object(_.getNavigationMenuItemStatusByTotal)(null===(i=e.premieres)||void 0===i?void 0:i.total)},{id:"studios",title:_.dictionary.navigationMenuStudios,url:k.routes.getUrl(k.FilmRoutesName.StudiosPage,{id:e.id}),status:Object(_.getNavigationMenuItemStatusByTotal)(null===(n=e.production)||void 0===n?void 0:n.total)},{id:"relatedMovies",title:_.dictionary.navigationMenuRelatedMovies,url:k.routes.getUrl(k.FilmRoutesName.RelatedMoviesPage,{id:e.id}),status:Object(_.getNavigationMenuItemStatusByTotal)(null===(a=e.relatedMovies)||void 0===a?void 0:a.total)},{id:"trailers",title:_.dictionary.navigationMenuTrailers,url:k.routes.getUrl(k.FilmRoutesName.TrailersPage,{id:e.id}),status:Object(_.getNavigationMenuItemStatusByTotal)(null===(o=e.trailers)||void 0===o?void 0:o.total)},{id:"images",title:_.dictionary.navigationMenuImages,url:k.routes.getUrl(k.FilmRoutesName.ImagesPage,{id:e.id}),status:Object(_.getNavigationMenuItemStatusByTotal)(null===(r=e.images)||void 0===r?void 0:r.total)},{id:"reviews",title:_.dictionary.navigationMenuReviews,url:k.routes.getUrl(k.FilmRoutesName.ReviewsPage,{id:e.id}),status:Object(_.getNavigationMenuItemStatusByTotal)(null===(l=e.rating)||void 0===l?void 0:null===(s=l.reviewCount)||void 0===s?void 0:s.count)},{id:"sites",title:_.dictionary.navigationMenuSites,url:k.routes.getUrl(k.FilmRoutesName.SitesPage,{id:e.id}),status:Object(_.getNavigationMenuItemStatusByTotal)(null===(d=e.sites)||void 0===d?void 0:d.total)},{id:"soundtracks",title:_.dictionary.navigationMenuSoundtracks,url:k.routes.getUrl(k.FilmRoutesName.SoundtracksPage,{id:e.id}),status:Object(_.getNavigationMenuItemStatusByTotal)(null===(c=e.soundtrack)||void 0===c?void 0:c.total)},{id:"subscribeToUpdates",title:_.dictionary.subscribeToUpdatesMenuSoundtracks,url:k.routes.getUrl(k.FilmRoutesName.SubscribeToUpdatesPage,{id:e.id}),status:Q.NavigationTabsMenuItemStatus.Default}]:[]}(e.film);return Ct(Q.NavigationTabs,{items:t})},xt=l.a.createElement,Dt=function(e){var t=e.film;return(null===t||void 0===t?void 0:t.synopsis)?xt(_.Synopsis,{synopsis:t.synopsis}):null},Pt=l.a.createElement,Bt=function(e){var t=e.filmId,i=e.currentReaction,n=Object(o.a)(e,["filmId","currentReaction"]),l=Object(s.useDispatch)(),d=Object(r.useCallback)((function(){l(Object(O.setFilmExpectationReactionEffect)({filmId:t,expectation:x.j.Yes,discard:i===x.j.Yes,rollbackExpectation:i||null}))}),[i]),c=Object(r.useCallback)((function(){l(Object(O.setFilmExpectationReactionEffect)({filmId:t,expectation:x.j.No,discard:i===x.j.No,rollbackExpectation:i||null}))}),[i]);return Pt(De.MovieExpectationRatingUserReactions,Object(a.a)({},n,{onLikeClick:d,onDislikeClick:c,currentReaction:i}))},At=l.a.createElement,Ut=function(e){var t=e.className,i=e.filmId,n=e.positionInTop,a=e.expectationRating,o=e.userExpectation,r=l.a.useMemo((function(){return k.routes.getUrl(k.ComingSoonRoutes.Movies)}),[]);return At(_.MovieExpectationRatingBlock,{className:t,renderRating:function(e){var t=e.className;return At(Pe.a,{className:t,movieId:i,type:b.RatingTypes.Expectation,rating:a,size:De.FilmRatingSizes.Sm})},renderRatingBar:function(e){var t=e.className;return At(De.MovieRatingBar,{className:t,positivePercent:a.value})},renderUserReactions:function(e){var t=e.className;return At(Bt,{filmId:i,className:t,currentReaction:null===o||void 0===o?void 0:o.value})},mostExpectationUrl:r,mostExpectationTitle:re.dictionary.mostExpectationFilms,positionInTop:n,positionInTopUrl:r})},Lt=l.a.createElement,Vt=function(e){var t=e.className,i=e.filmId,n=e.ratingValue,a=e.userVoting,o=Object(s.useDispatch)(),l=Object(r.useRef)(),d=Object(r.useCallback)((function(e){var t=e.value;l.current=t,o(Object(O.setFilmUserRatingEffect)({filmId:i,value:t,rollbackVote:a}))}),[o,i,a]);return Lt(De.MovieRateForm,{className:t,ratingValue:n||0,userRatingValue:null===(null===a||void 0===a?void 0:a.value)?void 0:null===a||void 0===a?void 0:a.value,onSubmit:d,isSubmitFailed:l.current!==a})},zt=i("eMbe"),Wt=l.a.createElement,qt=function(e){var t=e.filmId,i=e.value,n=e.votedAt,r=Object(o.a)(e,["filmId","value","votedAt"]),d=Object(s.useDispatch)(),c=l.a.useCallback((function(){d(Object(O.deleteFilmUserRatingEffect)({filmId:t,rollbackVote:{value:i,votedAt:n}}))}),[d,i,n,t]);return Wt(De.MovieUserRating,Object(a.a)({},r,{value:i,votedAt:n||void 0,onDeleteButtonClick:c}))},Yt=l.a.createElement,Ht=function(e){var t=e.className,i=e.filmId,n=e.kinopoiskRating,a=e.imdbRating,o=e.userData,l=e.top250Position,s=e.filmTitle,d=Object(r.useMemo)((function(){return k.routes.getUrl(k.ListsRoutes.FilmTop250)}),[]);return Yt(_.MovieRatingBlock,{className:t,title:De.movieRatingDictionary.ratingBlockTitle,renderRateForm:function(e){var t=e.className;return Yt(Vt,{filmId:i,className:t,ratingValue:n.value,userVoting:null===o||void 0===o?void 0:o.voting})},renderRating:function(e){var t=e.className;return Yt(Pe.a,{movieId:i,className:t,rating:n,type:b.RatingTypes.Kinopoisk,valueDigits:3,countDigits:7,isLink:!0})},renderSubRating:function(e){var t=e.className;return a&&Yt(De.MovieSubRating,{className:t,type:b.RatingTypes.Imdb,value:a.value,count:a.count})},renderListPosition:l?function(e){var t=e.className;return Yt(re.MovieListPositionBadge,{className:t,href:d,listName:te,position:l})}:void 0,renderWatchedButton:function(e){var t=e.className;return Yt(He,{filmId:i,className:t,voting:null===o||void 0===o?void 0:o.voting,activeText:re.dictionary.watchedFilm})},renderAddReviewButton:function(e){var t=e.className;return Yt(zt.a,{className:t})},renderUserRating:function(e){var t,n,a=e.className;return(null===o||void 0===o?void 0:null===(t=o.voting)||void 0===t?void 0:t.value)?Yt(qt,{filmId:i,movieTitle:(null===s||void 0===s?void 0:s.russian)||(null===s||void 0===s?void 0:s.original),className:a,value:null===o||void 0===o?void 0:null===(n=o.voting)||void 0===n?void 0:n.value,votedAt:o.voting.votedAt}):null}})},Kt=l.a.createElement,Qt=function(e){var t,i=e.className,n=e.film,a=n.rating.kinopoisk,o=n.rating.expectation;return a&&Object(De.isRatingActive)(a)?Kt(Ht,{filmId:n.id,className:i,kinopoiskRating:a,imdbRating:n.rating.imdb,userData:n.userData,top250Position:n.top250,filmTitle:n.title}):o&&Object(De.isRatingActive)(o)?Kt(Ut,{filmId:n.id,className:i,expectationRating:o,userExpectation:null===(t=n.userData)||void 0===t?void 0:t.expectation}):null},Zt=i("csgz"),Gt=i.n(Zt),Jt=l.a.createElement,$t=function(e){var t,i,n,a,o,r,s,d=e.className,c=e.film,u=l.a.useMemo((function(){return k.routes.getUrl(k.FilmRoutesName.CriticReviewsPage,{id:c.id})}),[c.id]),v=Boolean((null===(t=c.criticReviews)||void 0===t?void 0:t.total)&&(null===(i=c.rating.russianCritics)||void 0===i?void 0:i.isActive)),m=Boolean(null===(n=c.rating.worldwideCritics)||void 0===n?void 0:n.isActive);return v||m?Jt("div",{className:K()(d,Gt.a.root,Object(Y.a)({},Gt.a.rootSingleRating,!m||!v)),"data-tid":"166cbcc6"},c.rating.worldwideCritics&&m&&Jt(_.MovieRatingBarBlock,{className:Gt.a.ratingBar,sectionTitle:De.movieRatingDictionary.worldwideCriticsRatingBlockTitle,negativeTotal:null===(a=c.rating.worldwideCritics)||void 0===a?void 0:a.negativeCount,positiveTotal:null===(o=c.rating.worldwideCritics)||void 0===o?void 0:o.positiveCount,rating:Jt(Pe.a,{movieId:c.id,rating:c.rating.worldwideCritics,type:b.RatingTypes.WorldwideCritics,size:De.FilmRatingSizes.Sm,isLink:!0})}),c.rating.russianCritics&&v&&Jt(_.MovieRatingBarBlock,{className:Gt.a.ratingBar,sectionTitle:m?De.movieRatingDictionary.shortRussiaRatingBlockTitle:De.movieRatingDictionary.russiaRatingBlockTitle,sectionTitleUrl:u,negativeTotal:null===(r=c.negativeCriticReviews)||void 0===r?void 0:r.total,positiveTotal:null===(s=c.positiveCriticReviews)||void 0===s?void 0:s.total,rating:Jt(Pe.a,{movieId:c.id,rating:c.rating.russianCritics,type:b.RatingTypes.RussianCritics,size:De.FilmRatingSizes.Sm,isLink:!0})})):null},Xt=l.a.createElement,ei=i("MQ1I"),ti=i("5H1t"),ii=l.a.createElement,ni=function(e){var t=e.className,i=e.userAvatarBaseUrl,n=e.userAvatarFallBackUrl,l=e.currentUserVoting,d=e.userId,c=e.reviewId,u=e.filmId,v=e.votes,m=Object(o.a)(e,["className","userAvatarBaseUrl","userAvatarFallBackUrl","currentUserVoting","userId","reviewId","filmId","votes"]),f=Object(ti.i)(i,{mds:{x1:ti.b.orig,x2:ti.b.orig},fallback:n||""}),p=Object(s.useDispatch)(),b=l?Object(ei.getReactionTypeByUserVoting)(l):void 0,k=Object(r.useCallback)((function(e){var t=Object(ei.getUserVotingByReactionType)(e);t&&p(Object(O.filmPageSetUserReviewVoteEffect)({userVoting:t,userId:d,userReviewId:c,filmId:u,rollbackUserVoting:l,rollbackVotes:v}))}),[p,d,c,u,l,v]);return ii(ei.MovieUserReview,Object(a.a)({},m,{userId:d,className:t,reviewId:c,userImg:f,votes:v,userAvatarBaseUrl:i,userReactionType:b,onUserReaction:k}))},ai=i("SCjx"),oi=i.n(ai),ri=l.a.createElement,li=Object(r.memo)((function(e){var t,i,n,a,o,r,d,c,u,v,m,f=e.filmId,p=Object(s.useSelector)(w.selectIsAuthorized),b=Object(E.a)(C.FILM_USERS_REVIEWS_QUERY,{variables:{filmId:f,userReviewsOrderBy:_.REVIEWS_PAGINATED_LIST_DEFAULT_ORDER,userReviewsLimit:_.REVIEWS_PAGINATED_LIST_SIZE,withUserData:p}}),k=Object(T.a)(b,2),g=k[0],O=k[1],y=O.data,I=O.error;l.a.useEffect((function(){g()}),[g]);var S=(null===y||void 0===y?void 0:null===(t=y.film)||void 0===t?void 0:null===(i=t.usersReviewsPaginatedList)||void 0===i?void 0:i.items)||[],j=(null===y||void 0===y?void 0:null===(n=y.film)||void 0===n?void 0:null===(a=n.usersReviewsPaginatedList)||void 0===a?void 0:a.total)||0;return ri(kt.a,{placeholder:ri(ei.MovieUsersReviewsSkeleton,{className:oi.a.root}),isLoaded:Boolean(y||I)},Boolean(j)&&Boolean(null===S||void 0===S?void 0:S.length)&&ri(ei.MovieUsersReviews,{id:Le.c,filmId:null===y||void 0===y?void 0:null===(o=y.film)||void 0===o?void 0:o.id,negativeTotal:null===y||void 0===y?void 0:null===(r=y.film)||void 0===r?void 0:null===(d=r.usersReviewsNegative)||void 0===d?void 0:d.total,positiveTotal:null===y||void 0===y?void 0:null===(c=y.film)||void 0===c?void 0:null===(u=c.usersReviewsPositive)||void 0===u?void 0:u.total,neutralTotal:null===y||void 0===y?void 0:null===(v=y.film)||void 0===v?void 0:null===(m=v.usersReviewsNeutral)||void 0===m?void 0:m.total,total:j,navBar:ri(zt.a,null),userReviews:S.map((function(e){var t,i,n;return(null===e||void 0===e?void 0:e.text)?ri(ni,{key:e.id,filmId:f,className:oi.a.review,createdAt:e.createdAt,reviewId:e.id,text:e.text,title:e.title,type:e.type,votes:e.votes,userId:e.author.id,userReviewsCount:e.author.reviewsCount,userName:e.author.login,userAvatarBaseUrl:null===(t=e.author.avatar)||void 0===t?void 0:t.avatarsUrl,userAvatarFallBackUrl:null===(i=e.author.avatar)||void 0===i?void 0:i.fallbackUrl,currentUserVoting:null===(n=e.userData)||void 0===n?void 0:n.voting}):null}))}))})),si=i("Y/if"),di=i("gnpC"),ci=i.n(di),ui=l.a.createElement,vi=i("VUoP"),mi=i("DeaZ"),fi=l.a.createElement,pi=(de={},Object(Y.a)(de,x.k.Article,b.MediaPostTypes.article),Object(Y.a)(de,x.k.Game,b.MediaPostTypes.game),Object(Y.a)(de,x.k.Interview,b.MediaPostTypes.interview),Object(Y.a)(de,x.k.News,b.MediaPostTypes.news),Object(Y.a)(de,x.k.Photostory,b.MediaPostTypes.photostory),Object(Y.a)(de,x.k.Podcast,b.MediaPostTypes.podcast),Object(Y.a)(de,x.k.Video,b.MediaPostTypes.video),de),bi=function(e){var t,i,n,a,o=e.filmId,l=e.blockMeta,s=l.index,d=l.type,c=Object(E.a)(mi.a,{variables:{filmId:o,mediaPostsLimit:_.MEDIA_POSTS_CHUNK_SIZE}}),u=Object(T.a)(c,2),v=u[0],m=u[1],f=m.data,p=m.error,g=Object(Q.useViewportSize)(),O=Object(r.useMemo)((function(){return k.routes.getUrl(k.FilmRoutesName.MediaPostsPage,{id:o})}),[o]),y=Object(bt.b)(null===f||void 0===f?void 0:null===(t=f.film)||void 0===t?void 0:null===(i=t.mediaPosts)||void 0===i?void 0:i.items),I=g===b.ViewportSizes.Small;return fi(kt.a,{onLoad:v,isLoaded:Boolean(f||p),placeholder:fi(vi.b,{isTouchLayout:I,itemsCount:3})},y&&Boolean(y.length)&&fi(ut.BlockAnalyticsContainer,{blockId:d,position:s+1},fi(vi.a,{moreItemsLink:O,blockTitle:I?Re.c.touchMediaPostsBlockTitle:Re.c.mediaPostsBlockTitle,postsTotal:(null===f||void 0===f?void 0:null===(n=f.film)||void 0===n?void 0:null===(a=n.mediaPosts)||void 0===a?void 0:a.total)||0,viewportSize:g,showButtonsPermanently:g!==b.ViewportSizes.Small,posts:y.map((function(e){return{id:e.id,title:e.title,commentsCount:e.commentsCount,commentable:e.commentable,publishedAt:e.publishedAt,type:pi[e.type],thumbImage:e.thumbImage}})),isTouchLayout:I})))},ki=i("x79q"),gi=l.a.createElement,Oi={x1:ti.c.w300h192,x2:ti.c.w768h489},yi=l.a.createElement,Ii=l.a.createElement,Si=(ce={},Object(Y.a)(ce,b.BlocksTypes.MovieFacts,pt(It)),Object(Y.a)(ce,b.BlocksTypes.MovieBloopers,pt(ht)),Object(Y.a)(ce,b.BlocksTypes.MovieDetails,pt((function(e){var t=e.className,i=e.filmId,n=e.blockMeta,a=n.index,o=n.type,r=Object(s.useSelector)(w.selectIsAuthorized),l=Object(s.useSelector)(w.selectUserKpCityId),d=Object(E.b)(C.FILM_BASE_INFO_QUERY,{variables:{filmId:i,withUserData:r,kpCityId:l||null}}).data;return(null===d||void 0===d?void 0:d.film)?Xt(ut.BlockAnalyticsContainer,{blockId:o,position:a+1},Xt(_.MovieDetailsBlock,{className:t,tabs:Xt(Mt,{film:d.film}),synopsis:Xt(Dt,{film:d.film}),filmRating:Xt(Qt,{film:d.film}),criticRating:Xt($t,{film:d.film})})):null}))),Object(Y.a)(ce,b.BlocksTypes.MovieUserReviews,pt((function(e){var t,i=e.filmId,n=e.blockMeta,a=n.index,o=n.type,r=Object(E.b)(C.FILM_KINOPOISK_RATING_QUERY,{variables:{filmId:i}}).data,l=Object(De.isRatingActive)(null===r||void 0===r?void 0:null===(t=r.film)||void 0===t?void 0:t.rating.kinopoisk),d=Object(s.useSelector)(w.selectIsAuthorized);return ui("div",{className:ci.a.root,"data-tid":"ef14cc89"},ui(ut.BlockAnalyticsContainer,{blockId:o,position:a+1},ui(li,{filmId:i}),l&&d&&ui(si.a,{filmId:i})))}))),Object(Y.a)(ce,b.BlocksTypes.MovieSimilarFilms,pt(Et)),Object(Y.a)(ce,b.BlocksTypes.MovieMediaPosts,pt(bi)),Object(Y.a)(ce,b.BlocksTypes.MovieTrailersAndTeasers,pt((function(e){e.className;var t,i,n,r,l=e.filmId,s=e.blockMeta,d=s.type,c=s.index,u=Object(o.a)(e,["className","filmId","blockMeta"]),v=Object(E.a)(C.FILM_TRAILERS_QUERY,{variables:{filmId:l,trailersLimit:_.TRAILERS_CHUNK_SIZE}}),m=Object(T.a)(v,2),f=m[0],p=m[1],b=p.data,k=p.error,g=Object(Q.useViewportSize)(),O=Object(bt.b)(null===b||void 0===b?void 0:null===(t=b.film)||void 0===t?void 0:null===(i=t.trailers)||void 0===i?void 0:i.items),y=null===b||void 0===b?void 0:null===(n=b.film)||void 0===n?void 0:null===(r=n.trailers)||void 0===r?void 0:r.total;return gi(kt.a,{placeholder:gi(_.MovieTrailersBlockSkeleton,null),onLoad:f,isLoaded:Boolean(b||k)},Boolean(O.length)&&gi(ut.BlockAnalyticsContainer,{blockId:d,position:c+1},gi(_.MovieTrailersBlock,Object(a.a)({},u,{movieId:l,viewportSize:g,trailers:O.map((function(e){return{id:e.id,createdAt:e.createdAt,duration:e.duration,isEmbedded:e.isEmbedded,isMain:!1,preview:e.preview,title:e.title}})),trailersTotal:y,renderTrailer:function(e){var t=e.trailer,i=e.isLoaded,n=e.className,a=e.index;return t&&gi(ki.a,{movieId:l,trailer:t,previewMdsSizes:Oi,isLoaded:i,className:n,index:a})}}))))}))),Object(Y.a)(ce,b.BlocksTypes.MovieCriticReviews,pt((function(e){var t,i,n,a,o=e.filmId,r=e.blockMeta,l=r.index,s=r.type,d=Object(E.a)(C.FILM_CRITICS_REVIEWS_QUERY,{variables:{filmId:o,criticReviewsLimit:_.MOVIE_PAGE_CRITIC_REVIEWS_CHUNK_SIZE}}),c=Object(T.a)(d,2),u=c[0],v=c[1],m=v.data,f=v.error,p=Object(Q.useViewportSize)(),b=null===m||void 0===m?void 0:null===(t=m.film)||void 0===t?void 0:null===(i=t.criticReviews)||void 0===i?void 0:i.items,k=null===m||void 0===m?void 0:null===(n=m.film)||void 0===n?void 0:null===(a=n.criticReviews)||void 0===a?void 0:a.total;return yi(kt.a,{placeholder:yi(_.MovieCriticsReviewsBlockSkeleton,null),onLoad:u,isLoaded:Boolean(m||f)},b&&Boolean(b.length)&&k&&yi(ut.BlockAnalyticsContainer,{blockId:s,position:l+1},yi(_.MovieCriticsReviewsBlock,{movieId:o,items:b,total:k,viewportSize:p})))}))),Object(Y.a)(ce,b.BlocksTypes.MovieSuperBanner,_.MovieSuperBanner),Object(Y.a)(ce,b.BlocksTypes.MovieTodayInCinema,vt.a),ce),ji=Object(z.withZone)(n.AdditionalInformation)((function(){var e=Object(s.useSelector)((function(e){return Object(O.selectFilmPageAdditionalInformationBlockConfig)(e)}));return e?Ii(ut.BlocksRenderer,{config:e,componentsMap:Si,shouldSendShowAnalyticsEvent:!0}):null})),hi=l.a.createElement,Ri=Object(r.memo)((function(e){var t=e.className,i=e.filmId,n=e.poster,a=e.title,o=e.soundtrack,r=e.filmUserFolders,d=e.postersTotal,c=Object(s.useDispatch)(),u=Object(Q.useColorScheme)(),v=Object(s.useSelector)((function(e){return Object(it.f)(e,{movieId:i})})),m=Object(_.useCopyrightHolderSrcSet)({baseUrl:v}),f=Object(re.useIsMoviePlannedToWatch)(r),p=l.a.useCallback((function(){c(Object(O.setFilmFolderEffect)({filmId:i,folderId:b.DefaultFolders.WatchList,operation:f?b.FolderOperation.Remove:b.FolderOperation.Add}))}),[i,c,f]),g=Object(_.usePosterSrcSet)({avatarsUrl:null===n||void 0===n?void 0:n.avatarsUrl,fallbackUrl:null===n||void 0===n?void 0:n.fallbackUrl}),y=Object(_.usePostersUrl)({movieId:i,postersTotal:d}),I=Object(_.usePosterAlt)({russian:a.russian,original:a.original}),S=l.a.useMemo((function(){return(null===o||void 0===o?void 0:o.total)?k.routes.getUrl(k.FilmRoutesName.SoundtracksPage,{id:i}):void 0}),[null===o||void 0===o?void 0:o.total]);return hi(_.MoviePosterWithControls,{className:t,colorScheme:u,imgSrcSet:g,imgAlt:I,postersUrl:y,soundtrackUrl:S,copyrightImgSrcSet:m,isToWatchButtonActive:f,onToWatchButtonClick:p})})),wi=i("gOV+"),Ni=i("Ag3s"),Ti=i("+6sO"),Fi=i.n(Ti),_i=l.a.createElement,Ei=function(e){var t=e.className,i=e.filmId,n=e.filmUserFolders,a=Object(s.useDispatch)(),o=Object(wi.useFolderMenuColorScheme)(),r=Object(s.useSelector)(Ni.e),d=Object(s.useSelector)(w.selectIsAuthorized),c=Object(wi.useFolderLinksDecorator)(r,i),u=l.a.useCallback((function(){d||a(Object(Nt.loginEffect)())}),[a,d]),v=l.a.useCallback((function(e){var t=e.folderId;a(Object(O.setFilmFolderEffect)({filmId:i,folderId:t,operation:b.FolderOperation.Add}))}),[a,i]),m=l.a.useCallback((function(e){var t=e.folderId;a(Object(O.setFilmFolderEffect)({filmId:i,folderId:t,operation:b.FolderOperation.Remove}))}),[a,i]),f=l.a.useMemo((function(){return null===n||void 0===n?void 0:n.reduce((function(e,t){return(null===t||void 0===t?void 0:t.id)&&e.push(t.id),e}),[])}),[n]);return _i(wi.FoldersMenu,{className:t,colorScheme:o,folders:c,onFolderSelect:v,onFolderUnselect:m,onDropdownButtonClick:u,selectedFoldersIds:f,dropdownMenuClassName:Fi.a.dropdownMenu})},Ci=i("EgEk"),Mi=i("fDEn"),xi=i("TVy6"),Di=i("8n7h"),Pi=i.n(Di),Bi=l.a.createElement,Ai=Object(z.withZone)(n.SideSection)((function(e){var t,i,n,a,o=e.className,r=e.film,s=Object(De.isRatingActive)(r.rating.kinopoisk),d=null===(t=r.userData)||void 0===t?void 0:t.folders;return Bi(_.MovieBasicMediaLayout,{className:o,poster:Bi(Ri,{filmId:r.id,poster:null===r||void 0===r?void 0:r.poster,postersTotal:null!==(i=null===r||void 0===r?void 0:null===(n=r.posters)||void 0===n?void 0:n.total)&&void 0!==i?i:0,title:r.title,soundtrack:r.soundtrack,filmUserFolders:d}),socialControls:Bi(l.a.Fragment,null,Bi(_.MovieShare,{className:Pi.a.share}),Bi(Mi.a,{movieId:r.id,className:Pi.a.feedbackButtons})),trailer:Bi(xi.a,{movieId:r.id,mainTrailer:null===r||void 0===r?void 0:r.mainTrailer,previewInfoClassName:Pi.a.mainTrailerPreviewInfo}),userControls:Bi(l.a.Fragment,null,Bi("div",{className:Pi.a.controlContainer,"data-tid":"bb5fc559"},Bi(Ei,{filmId:r.id,className:Pi.a.foldersMenu,filmUserFolders:d}),s&&Bi(He,{filmId:r.id,className:Pi.a.watchedButton,voting:null===(a=r.userData)||void 0===a?void 0:a.voting})),Bi(Ci.a,{movieId:r.id,filmUserFolders:d}))})})),Ui=i("aJna"),Li=i("oEWk"),Vi=l.a.createElement,zi=l.a.createElement,Wi=i("fUZK"),qi=i("+uNs"),Yi=i("ndTU"),Hi=i.n(Yi),Ki=l.a.createElement,Qi=l.a.createElement,Zi=(ue={},Object(Y.a)(ue,b.BlocksTypes.MovieListsRelations,pt((function(e){var t,i,n,a,o,l=function(e){var t,i,n=Object(E.a)(C.FILM_LIST_RELATIONS_QUERY,{variables:e,notifyOnNetworkStatusChange:!0}),a=Object(T.a)(n,2),o=a[0],l=a[1],s=l.data,d=l.fetchMore;return[o,Object(r.useCallback)((function(){var e,t,i,n;return d({variables:{movieListsRelationsOffset:null!==(e=null===s||void 0===s?void 0:null===(t=s.film)||void 0===t?void 0:null===(i=t.movieListsRelationsPaginatedList)||void 0===i?void 0:null===(n=i.items)||void 0===n?void 0:n.length)&&void 0!==e?e:0},updateQuery:function(e,t){var i,n,a=t.fetchMoreResult;return(null===a||void 0===a?void 0:null===(i=a.film)||void 0===i?void 0:null===(n=i.movieListsRelationsPaginatedList)||void 0===n?void 0:n.items)?Object(F.a)(a,(function(t){var i,n,a,o;(null===t||void 0===t?void 0:null===(i=t.film)||void 0===i?void 0:null===(n=i.movieListsRelationsPaginatedList)||void 0===n?void 0:n.items)&&(t.film.movieListsRelationsPaginatedList.items=[].concat(Object(N.a)((null===(a=e.film)||void 0===a?void 0:null===(o=a.movieListsRelationsPaginatedList)||void 0===o?void 0:o.items)||[]),Object(N.a)(t.film.movieListsRelationsPaginatedList.items)))})):e}})}),[null===s||void 0===s?void 0:null===(t=s.film)||void 0===t?void 0:null===(i=t.movieListsRelationsPaginatedList)||void 0===i?void 0:i.items,d]),l]}({filmId:e.filmId,movieListsRelationsLimit:_.MOVIE_LIST_RELATION_CHUNK_SIZE}),s=Object(T.a)(l,3),d=s[0],c=s[1],u=s[2],v=u.data,m=u.error,f=u.loading,p=Object(bt.b)(null===v||void 0===v?void 0:null===(t=v.film)||void 0===t?void 0:null===(i=t.movieListsRelationsPaginatedList)||void 0===i?void 0:i.items),b=null!==(n=null===v||void 0===v?void 0:null===(a=v.film)||void 0===a?void 0:null===(o=a.movieListsRelationsPaginatedList)||void 0===o?void 0:o.total)&&void 0!==n?n:0;return Vi(kt.a,{onLoad:d,isLoaded:Boolean(v||m),placeholder:Vi(_.MovieListsBlockSkeleton,null)},p&&p.length>0&&Vi(_.MovieListsBlock,{items:p,loading:f,total:b,onFetchMore:c}))}))),Object(Y.a)(ue,b.BlocksTypes.MovieSoundtrack,pt((function(e){var t,i,n,a,o,r=e.filmId,l=Object(E.a)(C.FILM_SOUNDTRACK_QUERY,{variables:{filmId:r,soundtrackLimit:_.FILM_LIST_SOUNDTRACK_CHUNK_SIZE}}),s=Object(T.a)(l,2),d=s[0],c=s[1],u=c.data,v=c.error,m=null===u||void 0===u?void 0:null===(t=u.film)||void 0===t?void 0:null===(i=t.soundtrack)||void 0===i?void 0:null===(n=i.items)||void 0===n?void 0:n[0];return zi(kt.a,{onLoad:d,isLoaded:Boolean(u||v),placeholder:zi(_.MovieSoundtrackSkeleton,null)},m&&zi(_.MovieSoundtrack,{movieId:r,soundtrack:m,count:(null===u||void 0===u?void 0:null===(a=u.film)||void 0===a?void 0:null===(o=a.soundtrack)||void 0===o?void 0:o.total)||0}))}))),Object(Y.a)(ue,b.BlocksTypes.MovieFriends,pt((function(e){var t,i,n=e.filmId,a=Object(r.useState)(x.f.VoteValueDesc),o=a[0],d=a[1],c=function(e){var t,i,n,a=Object(E.a)(C.FILM_FRIENDS_VOTING_QUERY,{variables:e}),o=Object(T.a)(a,2),r=o[0],s=o[1],d=s.data,c=s.fetchMore;return[r,l.a.useCallback((function(e){var t,i,n,a;s.fetchMore({variables:{friendsVotingLimit:e,friendsVotingOffset:(null===d||void 0===d?void 0:null===(t=d.film)||void 0===t?void 0:null===(i=t.filmFriendsVoting)||void 0===i?void 0:null===(n=i.friendsVoting)||void 0===n?void 0:null===(a=n.items)||void 0===a?void 0:a.length)||0},updateQuery:function(e,t){var i,n,a,o=t.fetchMoreResult;return(null===o||void 0===o?void 0:null===(i=o.film)||void 0===i?void 0:null===(n=i.filmFriendsVoting)||void 0===n?void 0:null===(a=n.friendsVoting)||void 0===a?void 0:a.items)?Object(F.a)(o,(function(t){var i,n,a,o,r,l;(null===(i=t.film)||void 0===i?void 0:null===(n=i.filmFriendsVoting)||void 0===n?void 0:null===(a=n.friendsVoting)||void 0===a?void 0:a.items)&&(t.film.filmFriendsVoting.friendsVoting.items=[].concat(Object(N.a)((null===(o=e.film)||void 0===o?void 0:null===(r=o.filmFriendsVoting)||void 0===r?void 0:null===(l=r.friendsVoting)||void 0===l?void 0:l.items)||[]),Object(N.a)(t.film.filmFriendsVoting.friendsVoting.items)))})):e}})}),[c,null===d||void 0===d?void 0:null===(t=d.film)||void 0===t?void 0:null===(i=t.filmFriendsVoting)||void 0===i?void 0:null===(n=i.friendsVoting)||void 0===n?void 0:n.offset]),s]}({filmId:n,friendsVotingLimit:_.FILM_FRIENDS_INITIAL_ITEMS_LIMIT,sortFriendsVotingBy:o}),u=Object(T.a)(c,3),v=u[0],m=u[1],f=u[2],p=f.data,b=f.error,k=f.loading,g=function(e){var t,i,n,a=Object(E.a)(C.FILM_FRIENDS_OF_INTERESTS_QUERY,{variables:e}),o=Object(T.a)(a,2),r=o[0],s=o[1],d=s.data,c=s.fetchMore;return[r,l.a.useCallback((function(e){var t,i,n,a;c({variables:{friendsOfInterestsVotingLimit:e,friendsOfInterestsVotingOffset:(null===d||void 0===d?void 0:null===(t=d.film)||void 0===t?void 0:null===(i=t.filmFriendsOfInterestsVoting)||void 0===i?void 0:null===(n=i.friendsOfInterestsVoting)||void 0===n?void 0:null===(a=n.items)||void 0===a?void 0:a.length)||0},updateQuery:function(e,t){var i,n,a,o=t.fetchMoreResult;return(null===o||void 0===o?void 0:null===(i=o.film)||void 0===i?void 0:null===(n=i.filmFriendsOfInterestsVoting)||void 0===n?void 0:null===(a=n.friendsOfInterestsVoting)||void 0===a?void 0:a.items)?Object(F.a)(o,(function(t){var i,n,a,o,r,l;(null===(i=t.film)||void 0===i?void 0:null===(n=i.filmFriendsOfInterestsVoting)||void 0===n?void 0:null===(a=n.friendsOfInterestsVoting)||void 0===a?void 0:a.items)&&(t.film.filmFriendsOfInterestsVoting.friendsOfInterestsVoting.items=[].concat(Object(N.a)((null===(o=e.film)||void 0===o?void 0:null===(r=o.filmFriendsOfInterestsVoting)||void 0===r?void 0:null===(l=r.friendsOfInterestsVoting)||void 0===l?void 0:l.items)||[]),Object(N.a)(t.film.filmFriendsOfInterestsVoting.friendsOfInterestsVoting.items)))})):e}})}),[c,null===d||void 0===d?void 0:null===(t=d.film)||void 0===t?void 0:null===(i=t.filmFriendsOfInterestsVoting)||void 0===i?void 0:null===(n=i.friendsOfInterestsVoting)||void 0===n?void 0:n.offset]),s]}({filmId:n,friendsOfInterestsVotingLimit:_.FILM_FRIENDS_INITIAL_ITEMS_LIMIT}),O=Object(T.a)(g,3),y=O[0],I=O[1],S=O[2],j=S.data,h=S.error,R=((null===p||void 0===p?void 0:null===(t=p.film)||void 0===t?void 0:t.filmFriendsVoting)||{}).friendsVoting,M=((null===j||void 0===j?void 0:null===(i=j.film)||void 0===i?void 0:i.filmFriendsOfInterestsVoting)||{}).friendsOfInterestsVoting,D=Object(r.useCallback)((function(e){var t=e.id;d(t)}),[d]),P=Object(r.useCallback)((function(){return m(_.FILM_FRIENDS_MORE_ITEMS_LIMIT)}),[R]),B=Object(r.useCallback)((function(){return I(_.FILM_FRIENDS_MORE_ITEMS_LIMIT)}),[M]),A=Object(r.useState)(_.MovieFriendsTabStates.Skeleton),U=A[0],L=A[1],V=Object(s.useSelector)(w.selectIsAuthorized);Object(r.useEffect)((function(){var e,t,i,n,a,o;V?(null===R||void 0===R?void 0:null===(e=R.items)||void 0===e?void 0:e.length)||(null===M||void 0===M?void 0:null===(t=M.items)||void 0===t?void 0:t.length)?(null===R||void 0===R?void 0:null===(i=R.items)||void 0===i?void 0:i.length)&&(null===M||void 0===M?void 0:null===(n=M.items)||void 0===n?void 0:n.length)?L(_.MovieFriendsTabStates.FullTabs):(null===R||void 0===R?void 0:null===(a=R.items)||void 0===a?void 0:a.length)?L(_.MovieFriendsTabStates.OnlyFirstTab):(null===M||void 0===M?void 0:null===(o=M.items)||void 0===o?void 0:o.length)&&L(_.MovieFriendsTabStates.OnlySecondTab):L(_.MovieFriendsTabStates.Empty):L(_.MovieFriendsTabStates.Unauthorized)}),[U,R,M,V]);var z=Object(s.useDispatch)(),W=Object(r.useCallback)((function(){return z(Object(Nt.loginEffect)())}),[z]),q=Object(r.useCallback)((function(){v(),y()}),[R,M]),Y=Object(bt.b)(null===R||void 0===R?void 0:R.items),H=Object(bt.b)(null===M||void 0===M?void 0:M.items);return Ki(kt.a,{onLoad:q,isLoaded:Boolean((p||b)&&(j||h)),placeholder:Ki(_.MovieFriendsTab,{title:_.dictionary.friends},Ki(_.FriendsSkeleton,null))},Ki(_.MovieFriendsTabs,{className:Hi.a.root},U===_.MovieFriendsTabStates.Unauthorized&&Ki(_.MovieFriendsTab,{title:_.dictionary.friends},Ki(_.MovieFriendsLoginButton,{onLoginClick:W,description:qi.a.findFriendsDescription})),(U===_.MovieFriendsTabStates.OnlyFirstTab||U===_.MovieFriendsTabStates.FullTabs)&&Ki(_.MovieFriendsTab,{title:_.dictionary.friends},Ki(Wi.b,{isLoading:k,averageVote:null===R||void 0===R?void 0:R.averageVote,total:null===R||void 0===R?void 0:R.total,list:Y||[],error:b||void 0,handleLoadMore:P,handleSortFriendsVotingChange:D,sortBy:o})),(U===_.MovieFriendsTabStates.OnlySecondTab||U===_.MovieFriendsTabStates.FullTabs)&&Ki(_.MovieFriendsTab,{title:Ki(_.FriendsOfInterestsTabTitle,null)},Ki(Wi.a,{averageVote:null===M||void 0===M?void 0:M.weightedAverageVote,total:null===M||void 0===M?void 0:M.total,list:H||[],error:h||void 0,handleLoadMore:B})),U===_.MovieFriendsTabStates.Empty&&Ki(_.MovieFriendsTab,{title:_.dictionary.friends},Ki(_.EmptyFriends,{description:qi.a.emptyFriendsDescription}))))}))),Object(Y.a)(ue,b.BlocksTypes.Banner300x600,_.Banner300x600),Object(Y.a)(ue,b.BlocksTypes.FilmBanner200x200,_.FilmSidebarBanner200x200),ue),Gi=function(){var e=Object(s.useSelector)((function(e){return Object(Li.b)(e)}));return e?Qi(ut.BlocksRenderer,{config:e,componentsMap:Zi}):null},Ji=i("lT43"),$i=i("FLYk"),Xi=Object(z.withZone)(n.BaseFilmInfo)(Q.EncyclopedicPageLayout),en=i("WbMH"),tn=i("pIEH");var nn,an=l.a.createElement,on=function(e){var t,i,n,a,o=e.film,r=e.producers,l=e.directors,s=e.actors,d=e.awards,c={"@context":"https://schema.org","@type":"Movie",url:(a=o.id,"".concat("https://kinopoisk.ru").concat(k.routes.getUrl(k.FilmRoutesName.FilmPage,{id:a}))),name:Object(tn.j)(o.title),alternativeHeadline:Object(tn.b)(o.title),alternateName:Object(tn.b)(o.title),description:Object(tn.g)(o.synopsis),aggregateRating:Object(tn.a)(o.rating.kinopoisk),image:Object(tn.l)(o.poster),genre:Object(tn.h)(o.genres),award:Object(tn.c)(d),contentRating:Object(tn.d)((null===(t=o.restriction)||void 0===t?void 0:t.mpaa)||null),isFamilyFriendly:Object(tn.i)((null===(i=o.restriction)||void 0===i?void 0:i.age)||null),producer:Object(tn.k)(r),director:Object(tn.k)(l),actor:Object(tn.k)(s),trailer:Object(tn.n)(o.mainTrailer,Object(tn.j)(o.title),Object(tn.i)((null===(n=o.restriction)||void 0===n?void 0:n.age)||null)),countryOfOrigin:Object(tn.e)(o.countries),timeRequired:Object(tn.m)(o.duration),datePublished:Object(tn.f)(o.productionYear)};return an(en.JsonLd,{item:c})},rn=l.a.createElement,ln=function(e){var t,i,n,a,o=e.film,r=Object(bt.b)(null===(t=o.producers)||void 0===t?void 0:t.items).map((function(e){return(null===e||void 0===e?void 0:e.person)||null})),l=Object(bt.b)(null===(i=o.directors)||void 0===i?void 0:i.items).map((function(e){return(null===e||void 0===e?void 0:e.person)||null})),s=Object(bt.b)(null===(n=o.actors)||void 0===n?void 0:n.items).map((function(e){return(null===e||void 0===e?void 0:e.person)||null})),d=Object(bt.b)(null===(a=o.filmMainAward)||void 0===a?void 0:a.items).filter((function(e){return e.win})).map((function(e){return e.nomination.award}));return rn(on,{film:o,producers:r,directors:l,actors:s,awards:d})},sn=i("ysqo"),dn=i.n(sn),cn=i("YEzN"),un=l.a.createElement,vn=function(e){var t=e.film,i=e.title,n=Object(s.useSelector)((function(e){return Object(V.a)(e,{movieId:t.id})})),a=Object(cn.a)({movieTitle:t.title,year:t.productionYear||void 0,isAvailableOnline:n,seoDescription:Re.c.seoDescription}),o=Object(cn.d)({filmTitle:t.title,year:t.productionYear||void 0}),r=function(e){var t=k.routes.getUrl(k.FilmRoutesName.FilmPage,{id:e});return{kinopoisk:"https://www.kinopoisk.ru",full:"".concat("https://www.kinopoisk.ru").concat(t),phoneApp:"https/www.kinopoisk.ru".concat(t),twitterCard:"kp://filmDetail/".concat(e)}}(t.id),d=Object(cn.b)(i,t.title),c=Object(cn.c)({mainTrailer:t.mainTrailer,restriction:t.restriction,baseUrl:r.kinopoisk}),u=t.poster?Object(tn.l)(t.poster):void 0,v=Object(Q.useViewportSize)();return un(dn.a,null,un("title",{"data-tid":"b5cfde5"},i),v===b.ViewportSizes.Small&&un("meta",{name:"viewport",content:"initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width","data-tid":"b5cfde5"}),un("meta",{name:"description",content:a,"data-tid":"b5cfde5"}),un("meta",{name:"keywords",content:d,"data-tid":"b5cfde5"}),o&&un(l.a.Fragment,null,un("meta",{property:"title",content:o,"data-tid":"b5cfde5"}),un("meta",{property:"og:title",content:o,"data-tid":"b5cfde5"}),un("meta",{property:"twitter:title",content:o,"data-tid":"b5cfde5"}),un("meta",{name:"mrc__share_title",content:o,"data-tid":"b5cfde5"})),un("meta",{property:"og:description",content:a,"data-tid":"b5cfde5"}),un("meta",{property:"og:type",content:"video.movie","data-tid":"b5cfde5"}),un("meta",{property:"og:url",content:r.full,"data-tid":"b5cfde5"}),un("meta",{property:"fb:app_id",content:"121953784483000","data-tid":"b5cfde5"}),un("meta",{property:"fb:pages",content:"152308956519","data-tid":"b5cfde5"}),un("link",{rel:"canonical",href:r.full,"data-tid":"b5cfde5"}),un("link",{rel:"alternate",href:"android-app://ru.kinopoisk/".concat(r.phoneApp),"data-tid":"b5cfde5"}),un("link",{rel:"alternate",href:"ios-app://EK7Z26L6D4.ru.kinopoisk/".concat(r.phoneApp),"data-tid":"b5cfde5"}),c&&un(l.a.Fragment,null,un("meta",{property:"ya:ovs:upload_date",content:c.uploadDate,"data-tid":"b5cfde5"}),un("meta",{property:"ya:ovs:adult",content:c.isAdult,"data-tid":"b5cfde5"}),un("meta",{property:"ya:ovs:allow_embed",content:"true","data-tid":"b5cfde5"}),un("meta",{property:"og:video:type",content:"text/html","data-tid":"b5cfde5"}),un("meta",{name:"video_src",content:c.sharingUrl,"data-tid":"b5cfde5"}),un("meta",{name:"video_width",content:c.width,"data-tid":"b5cfde5"}),un("meta",{name:"twitter:player:width",content:c.width,"data-tid":"b5cfde5"}),un("meta",{name:"video_height",content:c.height,"data-tid":"b5cfde5"}),un("meta",{name:"twitter:player:height",content:c.height,"data-tid":"b5cfde5"}),un("meta",{name:"video_type",content:"application/x-shockwave-flash","data-tid":"b5cfde5"}),un("meta",{name:"medium",content:"video","data-tid":"b5cfde5"}),un("meta",{name:"twitter:player",content:c.sharingUrl,"data-tid":"b5cfde5"}),un("meta",{name:"twitter:player:stream",content:c.sharingUrl,"data-tid":"b5cfde5"}),un("meta",{name:"twitter:player:stream:content_type",content:"video/mp4","data-tid":"b5cfde5"}),un("meta",{property:"og:video:iframe",content:c.sharingUrl,"data-tid":"b5cfde5"}),un("meta",{property:"og:video:url",content:c.sharingUrl,"data-tid":"b5cfde5"}),un("meta",{property:"og:video:secure_url",content:c.sharingUrl,"data-tid":"b5cfde5"}),c.preview&&un("link",{rel:"videothumbnail",href:c.preview,"data-tid":"b5cfde5"}),c.duration&&un(l.a.Fragment,null,un("meta",{property:"video:duration",content:c.duration,"data-tid":"b5cfde5"}),un("meta",{property:"og:duration",content:c.duration,"data-tid":"b5cfde5"}))),u&&un(l.a.Fragment,null,un("link",{rel:"image_src",href:u,"data-tid":"b5cfde5"}),un("meta",{property:"og:image",content:u,"data-tid":"b5cfde5"}),un("meta",{property:"vk:image",content:u,"data-tid":"b5cfde5"}),un("meta",{property:"og:image:width",content:"600","data-tid":"b5cfde5"}),un("meta",{property:"og:image:height",content:"900","data-tid":"b5cfde5"})),r.twitterCard&&un(l.a.Fragment,null,un("meta",{name:"twitter:card",content:"app","data-tid":"b5cfde5"}),un("meta",{name:"twitter:site",content:"kinopoiskru","data-tid":"b5cfde5"}),un("meta",{name:"twitter:app:name:iphone",content:"\u041a\u0438\u043d\u043e\u041f\u043e\u0438\u0441\u043a","data-tid":"b5cfde5"}),un("meta",{name:"twitter:app:id:iphone",content:"477718890","data-tid":"b5cfde5"}),un("meta",{name:"twitter:app:url:iphone",content:r.twitterCard,"data-tid":"b5cfde5"}),un("meta",{name:"twitter:app:name:ipad",content:"\u041a\u0438\u043d\u043e\u041f\u043e\u0438\u0441\u043a","data-tid":"b5cfde5"}),un("meta",{name:"twitter:app:id:ipad",content:"477718890","data-tid":"b5cfde5"}),un("meta",{name:"twitter:app:url:ipad",content:r.twitterCard,"data-tid":"b5cfde5"}),un("meta",{name:"twitter:app:name:googleplay",content:"\u041a\u0438\u043d\u043e\u041f\u043e\u0438\u0441\u043a","data-tid":"b5cfde5"}),un("meta",{name:"twitter:app:id:googleplay",content:"ru.kinopoisk","data-tid":"b5cfde5"}),un("meta",{name:"twitter:app:url:googleplay",content:r.twitterCard,"data-tid":"b5cfde5"})))},mn=i("OJp1"),fn=i("zs4Q"),pn=i.n(fn),bn=l.a.createElement,kn=function(e){var t=e.filmId,i=e.title,n=e.setElementRef,a=e.filmData,o=e.mainInfoBlockColorScheme,r=e.hasPromoTrailer,s=Object($i.a)({movieId:t});if(!(null===a||void 0===a?void 0:a.film))throw new Error("Film ".concat(t," missed in cache"));return bn(l.a.Fragment,null,bn(ne.a,null),bn(vn,{film:a.film,title:i}),bn(ln,{film:a.film}),bn(mn.a,null),bn(ae.a,{params:m.SPECIAL_POPUP_DESKTOP_PARAMS,renderAdfoxComponent:function(e){return bn(m.AdfoxSpecialPopup,{params:e})}}),bn(oe.a,{ref:n},bn(ie.a,{routeName:k.FilmRoutesName.FilmPage,pageId:t}),bn(Ji.a,{movieId:t}),bn(Q.ColorSchemeProvider,{value:o},bn(Xi,{className:pn.a.root,main:bn(ct,{film:a.film,className:K()(pn.a.basicInfoSection,Object(Y.a)({},pn.a.basicInfoSectionDark,o===Q.BlocksColorSchemes.Dark))}),mainClassName:pn.a.main,sidebar:bn(Ai,{film:a.film,className:K()(pn.a.basicMediaSection,Object(Y.a)({},pn.a.basicMediaSectionDark,o===Q.BlocksColorSchemes.Dark))}),delimiterClassName:K()(Object(Y.a)({},pn.a.delimiterInDark,o===Q.BlocksColorSchemes.Dark)),containerClassName:r?pn.a.videoContainer:void 0,background:bn(Ui.a,{movieId:t,onlineNameplateTitle:$})})),bn(Q.EncyclopedicPageLayout,{className:pn.a.root,sidebar:bn(Gi,null),sidebarPosition:Q.SidebarPositions.Right,mainClassName:pn.a.additionalInformationSection,sidebarClassName:pn.a.sidebarSection,main:bn(ji,null)}),bn(_.KpEmptyMovieIframe,{src:s})))},gn=l.a.createElement,On=Object(z.withZone)(n.Page,(function(e){return{id:e.filmId,url:e.originalUrl,title:e.title}}))((function(e){var t=Object(W.useVisibilitySensor)().setElementRef;return gn(kn,Object(a.a)({setElementRef:t},e))})),yn=l.a.createElement,In=function(e){var t,i,n,r,l=e.filmId,d=Object(o.a)(e,["filmId"]),c=Object(s.useSelector)(w.selectIsAuthorized),u=Object(s.useSelector)(w.selectUserKpCityId),v=Object(E.b)(C.FILM_BASE_INFO_QUERY,{variables:{filmId:l,withUserData:c,kpCityId:u||null}}).data,m=Object(s.useSelector)((function(e){return Object(V.b)(e,{movieId:l})})),f=Object(s.useSelector)((function(e){return Object(V.a)(e,{movieId:l})})),p=Boolean(Object(s.useSelector)((function(e){return Object(V.d)(e,{movieId:l})}))),b=L({title:null===v||void 0===v?void 0:null===(t=v.film)||void 0===t?void 0:t.title,isAvailableOnline:f,hasReviews:Boolean(null===v||void 0===v?void 0:null===(i=v.film)||void 0===i?void 0:null===(n=i.userReviews)||void 0===n?void 0:n.total),year:null===v||void 0===v?void 0:null===(r=v.film)||void 0===r?void 0:r.productionYear});return yn(On,Object(a.a)({},d,{filmId:l,title:b,filmData:v,mainInfoBlockColorScheme:m,hasPromoTrailer:p}))},Sn=i("NKw4"),jn=i("F8Ip"),hn=i.n(jn),Rn=l.a.createElement,wn=function(e){var t,i,n,a=e.className,o=e.film,r=o.id,s=o.rating,d=o.title,c=o.userData,u=o.productionYear,v=o.genres,m=o.countries,f=o.restriction,p=o.duration,k=o.poster,g=o.synopsis,O=o.shortDescription,y=o.ott,I=o.onlineViewOptions,S=o.isTicketsAvailable,j=Object(De.getRatingForHeaderBlock)(s);return Rn(_.TouchMajorInfoLayout,{className:a,title:Rn(_.TouchMovieTitle,{title:d}),subtitle:Rn(_.TouchMovieSubtitle,{renderActiveRating:function(){return j?Rn("span",{"data-tid":"f881bb38"},Rn(Pe.a,{movieId:r,type:j.type,rating:j.rating,size:De.FilmRatingSizes.Sm,valueDigits:1,viewportSize:b.ViewportSizes.Small})):null},userVoteValue:null!==(t=null===c||void 0===c?void 0:null===(i=c.voting)||void 0===i?void 0:i.value)&&void 0!==t?t:null,title:d}),meta:Rn(_.TouchMovieMeta,{productionYear:u,genres:v,countries:m,seasonsCount:null,restrictionAge:null!==(n=null===f||void 0===f?void 0:f.age)&&void 0!==n?n:null,duration:p}),poster:Rn(_.TouchMoviePosterContainer,{avatarsUrl:null===k||void 0===k?void 0:k.avatarsUrl,fallbackUrl:null===k||void 0===k?void 0:k.fallbackUrl,russianTitle:d.russian,originalTitle:d.original}),actionButtons:Rn(l.a.Fragment,null,Rn("div",{className:hn.a.actionButtonsRoot,"data-tid":"37ded00f"},Rn(Me.a,{className:hn.a.watchOnlineButton,ott:y,onlineViewOptions:I,isTouch:!0}),S?Rn(Ge,{filmId:o.id,className:K()(hn.a.ticketsButton,(null===o||void 0===o?void 0:o.onlineViewOptions)&&hn.a.ticketsButtonWithWatchOnline),buttonType:(null===o||void 0===o?void 0:o.onlineViewOptions)?q.OnlyIcon:q.Full}):null),I&&Object(tt.isPlusWatchOnlineButton)(I)&&I.textToDisplay?Rn("div",{className:hn.a.subOfferText,"data-tid":"37ded00f"},I.textToDisplay):null),synopsis:g?Rn(_.TouchMovieSynopsis,{shortDescription:O,synopsis:g}):Rn(_.EmptyMovieInfo,null),buttonBar:Rn("div",null,"[button bar]")})},Nn=i("NgRY"),Tn=l.a.createElement,Fn=l.a.createElement,_n=i("mFDE"),En=i("YKes"),Cn=i("qmbv"),Mn=i("UL9a"),xn=l.a.createElement,Dn=i("t1z0"),Pn=l.a.createElement,Bn=i("0XeB"),An=l.a.createElement,Un=l.a.createElement,Ln=(nn={},Object(Y.a)(nn,b.BlocksTypes.MovieTouchRating,pt((function(e){var t,i,n,a,o=function(e){var t,i,n,a,o,l,d=e.filmId,c=e.isAuthorized,u=Object(s.useDispatch)(),v=Object(E.a)(D,{variables:{filmId:d,withUserData:c}}),m=Object(T.a)(v,2),f=m[0],p=m[1],b=p.data,k=p.error,g=null===b||void 0===b?void 0:b.film,O=Object(A.a)(g),y=Object(r.useCallback)((function(e){var t;u(Object(P.b)({filmId:d,value:e,rollbackVote:null===g||void 0===g?void 0:null===(t=g.userData)||void 0===t?void 0:t.voting}))}),[null===g||void 0===g?void 0:null===(t=g.userData)||void 0===t?void 0:t.voting,d]),I=Object(r.useCallback)((function(){var e,t,i,n;u(Object(B.a)({filmId:d,expectation:x.j.Yes,discard:(null===g||void 0===g?void 0:null===(e=g.userData)||void 0===e?void 0:null===(t=e.expectation)||void 0===t?void 0:t.value)===x.j.Yes,rollbackExpectation:(null===g||void 0===g?void 0:null===(i=g.userData)||void 0===i?void 0:null===(n=i.expectation)||void 0===n?void 0:n.value)||null}))}),[null===g||void 0===g?void 0:null===(i=g.userData)||void 0===i?void 0:null===(n=i.expectation)||void 0===n?void 0:n.value,d]),S=Object(r.useCallback)((function(){var e,t,i,n;u(Object(B.a)({filmId:d,expectation:x.j.No,discard:(null===g||void 0===g?void 0:null===(e=g.userData)||void 0===e?void 0:null===(t=e.expectation)||void 0===t?void 0:t.value)===x.j.No,rollbackExpectation:(null===g||void 0===g?void 0:null===(i=g.userData)||void 0===i?void 0:null===(n=i.expectation)||void 0===n?void 0:n.value)||null}))}),[null===g||void 0===g?void 0:null===(a=g.userData)||void 0===a?void 0:null===(o=a.expectation)||void 0===o?void 0:o.value,d]);return{handleFetchData:f,data:b,error:k,positiveReviewPercent:O,positiveReviewTotal:(null===g||void 0===g?void 0:null===(l=g.usersReviewsPositive)||void 0===l?void 0:l.total)||null,handleRatingVote:y,handleWaitClick:I,handleDontWaitClick:S}}({filmId:e.filmId,isAuthorized:Object(s.useSelector)(w.selectIsAuthorized)}),l=o.handleFetchData,d=o.data,c=o.error,u=o.positiveReviewPercent,v=o.positiveReviewTotal,m=o.handleRatingVote,f=o.handleWaitClick,p=o.handleDontWaitClick;return Fn(kt.a,{onLoad:l,isLoaded:Boolean(d||c),placeholder:Fn(_.TouchRatingSectionSkeleton,null)},Boolean(null===d||void 0===d?void 0:null===(t=d.film)||void 0===t?void 0:t.rating)&&Fn(_.TouchRatingSection,{doesntRatingText:qi.a.filmDoesntRating,rating:(null===d||void 0===d?void 0:null===(i=d.film)||void 0===i?void 0:i.rating)||null,userData:(null===d||void 0===d?void 0:null===(n=d.film)||void 0===n?void 0:n.userData)||null,top250Position:(null===d||void 0===d?void 0:null===(a=d.film)||void 0===a?void 0:a.top250)||null,positiveReviewPercent:u,positiveReviewTotal:v,onRatingVote:m,onWaitClick:f,onDontWaitClick:p}))}))),Object(Y.a)(nn,b.BlocksTypes.MovieActors,pt((function(e){var t,i=e.className,n=e.filmId,a=e.blockMeta,o=a.type,r=a.index,l=Object(E.a)(C.FILM_ACTORS_QUERY,{variables:{filmId:n}}),s=Object(T.a)(l,2),d=s[0],c=s[1],u=c.data,v=c.error;return xn(Mn.a,{className:i,handleFetchData:d,movieId:n,movie:null!==(t=null===u||void 0===u?void 0:u.film)&&void 0!==t?t:null,error:v,blockIndex:r,blockType:o})}))),Object(Y.a)(nn,b.BlocksTypes.MovieCreators,pt((function(e){var t,i=e.className,n=e.filmId,a=e.blockMeta,o=a.type,r=a.index,l=Object(E.a)(C.FILM_CREATORS_QUERY,{variables:{filmId:n}}),s=Object(T.a)(l,2),d=s[0],c=s[1],u=c.data,v=c.error;return Pn(Dn.a,{className:i,handleFetchData:d,movieId:n,movie:null!==(t=null===u||void 0===u?void 0:u.film)&&void 0!==t?t:null,error:v,blockIndex:r,blockType:o})}))),Object(Y.a)(nn,b.BlocksTypes.MovieFacts,pt(It)),Object(Y.a)(nn,b.BlocksTypes.MovieBloopers,pt(ht)),Object(Y.a)(nn,b.BlocksTypes.MovieSimilarFilms,pt(Et)),Object(Y.a)(nn,b.BlocksTypes.MovieSequelFilms,pt((function(e){var t,i=e.filmId,n=e.className,a=e.blockMeta,o=a.type,r=a.index,l=Object(s.useSelector)(w.selectIsAuthorized),d=Object(Q.useViewportSize)(),c=Object(E.a)(C.SEQUELS_PREQUELS_QUERY,{variables:{filmId:i,withUserData:l}}),u=Object(T.a)(c,2),v=u[0],m=u[1],f=m.data,p=m.error;return Tn(Nn.a,{handleFetchData:v,movieId:i,movie:null!==(t=null===f||void 0===f?void 0:f.film)&&void 0!==t?t:null,error:p,className:n,blockIndex:r,blockType:o,viewportSize:d})}))),Object(Y.a)(nn,b.BlocksTypes.MovieTrailersAndTeasers,Object(Cn.a)(_n.a)),Object(Y.a)(nn,b.BlocksTypes.MovieAwards,Object(Cn.a)(En.a)),Object(Y.a)(nn,b.BlocksTypes.MovieMediaPosts,pt(bi)),Object(Y.a)(nn,b.BlocksTypes.MovieUserReviews,pt((function(e){var t=e.filmId,i=e.blockMeta,n=i.type,a=i.index,o=Object(s.useSelector)(w.selectIsAuthorized),r=Object(E.a)(C.FILM_USERS_REVIEWS_QUERY,{variables:{filmId:t,userReviewsOrderBy:_.REVIEWS_PAGINATED_LIST_DEFAULT_ORDER,userReviewsLimit:_.REVIEWS_PAGINATED_LIST_SIZE,withUserData:o}}),l=Object(T.a)(r,2),d=l[0],c=l[1],u=c.data,v=c.error;return An(Bn.a,{handleFetchData:d,movie:null===u||void 0===u?void 0:u.film,error:v,movieId:t,blockType:n,blockIndex:a})}))),nn),Vn=Object(z.withZone)(n.AdditionalInformation)((function(){var e=Object(s.useSelector)((function(e){return Object(O.selectFilmPageTouchBlockConfig)(e)}));return e?Un(ut.BlocksRenderer,{config:e,componentsMap:Ln,shouldSendShowAnalyticsEvent:!0}):null})),zn=l.a.createElement,Wn=function(e){var t=e.film,i=e.title;return zn(Q.ViewportSizeProvider,{value:b.ViewportSizes.Small},zn(vn,{film:t,title:i}),zn(ae.a,{params:m.SPECIAL_POPUP_TOUCH_PARAMS,renderAdfoxComponent:function(e){return zn(m.AdfoxSpecialPopup,{params:e})}}),zn(ln,{film:t}),zn(Sn.a,null,zn(wn,{film:t}),zn(Vn,null)))},qn=l.a.createElement,Yn=Object(z.withZone)(n.Page,(function(e){return{id:e.filmId,url:e.originalUrl,title:e.title}}))((function(e){var t=Object(W.useVisibilitySensor)().setElementRef;return qn(Wn,Object(a.a)({setElementRef:t},e))})),Hn=l.a.createElement,Kn=function(e){var t,i,n,r,l=e.filmId,d=Object(o.a)(e,["filmId"]),c=Object(s.useSelector)(w.selectIsAuthorized),u=Object(s.useSelector)(w.selectUserKpCityId),v=Object(E.b)(C.FILM_BASE_INFO_QUERY,{variables:{filmId:l,withUserData:c,kpCityId:u||null}}).data,m=Object(s.useSelector)((function(e){return Object(V.a)(e,{movieId:l})})),f=L({title:null===v||void 0===v?void 0:null===(t=v.film)||void 0===t?void 0:t.title,isAvailableOnline:m,hasReviews:Boolean(null===v||void 0===v?void 0:null===(i=v.film)||void 0===i?void 0:null===(n=i.userReviews)||void 0===n?void 0:n.total),year:null===v||void 0===v?void 0:null===(r=v.film)||void 0===r?void 0:r.productionYear});if(!(null===v||void 0===v?void 0:v.film))throw new Error("Film ".concat(l," missed in cache"));return Hn(Yn,Object(a.a)({},d,{filmId:l,title:f,film:v.film}))},Qn=l.a.createElement,Zn=function(e){var t=e.filmId,i=Object(o.a)(e,["filmId"]),n=Object(s.useSelector)(d.b);return Qn(n?In:Kn,Object(a.a)({filmId:t},i))};Zn.getInitialProps=function(e){var t,i,n,a,o,r,l,s,d;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(a=Number(e.query.id),e.store.runSaga){c.next=3;break}throw new Error("Redux Saga not found");case 3:return c.next=5,p.a.awrap(e.store.runSaga(g.a,Object(O.filmPageFetchInitialPropsEffect)({filmId:a,requestId:null===(t=e.req)||void 0===t?void 0:t.requestId})).toPromise());case 5:if(o=c.sent,!(null===(r=o.baseInfo)||void 0===r?void 0:null===(i=r.data)||void 0===i?void 0:i.film)){c.next=9;break}return c.abrupt("return",{filmId:a,originalUrl:null===(l=e.req)||void 0===l?void 0:l.originalUrl});case 9:if(s=Object(y.d)({errors:null===r||void 0===r?void 0:r.errors,errorType:I.GraphqlErrorsTypes.NotFound,path:"film"}),d=s?b.HttpStatusesCodes.NotFound:b.HttpStatusesCodes.InternalServerError,e.res){c.next=13;break}return c.abrupt("return",{filmId:a,statusCode:d});case 13:if(d!==b.HttpStatusesCodes.NotFound||!S(r)){c.next=17;break}return e.res.redirect(k.routes.getUrl(k.FilmRoutesName.TvSeriesPage,{id:a}),302),e.res.end(),c.abrupt("return",{filmId:a});case 17:return e.res.statusCode=d,e.res.end(),c.abrupt("return",{filmId:a,statusCode:d,originalUrl:null===(n=e.req)||void 0===n?void 0:n.originalUrl});case 20:case"end":return c.stop()}}),null,null,null,Promise)};var Gn=Object(u.withDynamicModules)([Object(j.a)(),Object(h.a)(),Object(O.getFilmPageModule)(),Object(v.a)(),Object(R.a)(),Object(c.a)(),Object(d.a)(),Object(m.getAdfoxModule)()])(Zn)},CuJt:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/film",function(){return i("CMsO")}])},DeaZ:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FilmMediaPosts"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filmId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"mediaPostsLimit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"10"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"film"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"filmId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"mediaPosts"},name:{kind:"Name",value:"post"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"mediaPostsLimit"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commentsCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"publishedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commentable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"type"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"thumbImage"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarsUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fallbackUrl"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:563,source:{body:"\n    query FilmMediaPosts($filmId: Long!, $mediaPostsLimit: Int = 10) {\n        film(id: $filmId) {\n            id\n            mediaPosts: post(limit: $mediaPostsLimit) {\n                items {\n                    id\n                    title\n                    commentsCount\n                    publishedAt\n                    commentable\n                    type\n                    thumbImage {\n                        avatarsUrl\n                        fallbackUrl\n                    }\n                }\n                total\n            }\n        }\n    }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}}},DzDZ:function(e,t,i){"use strict";i.d(t,"a",(function(){return xe}));var n=i("yw3l"),a=i("ZmC0"),o=i("VtSi"),r=i.n(o),l=i("M6UX"),s=i("B277"),d=i("OrNH"),c=i("5QFK"),u=i("Ag3s"),v=i("8Hq5"),m=i("BFBg"),f=i("6BAR"),p=i("C9RK"),b=i("PQv5"),k=i.n(b),g=i("xNSc"),O=function(e){var t=e.apolloClient,i=e.filmId,n=Object(g.f)({id:i});try{return t.readFragment({id:n,fragment:p.FILM_USER_DATA_FRAGMENT})}catch(a){k.a.error("Read user data fragment failed")}return null},y=function(e){var t=e.apolloClient,i=e.filmId,n=e.data,a=e.logger,o=Object(g.f)({id:i});try{t.writeFragment({id:o,fragment:p.FILM_USER_DATA_FRAGMENT,data:n})}catch(r){a&&a.error("Mutate user data fragment failed")}},I=function(e){var t=e.folderId,i=e.apolloClient,n=e.filmId,a=e.logger,o=O({apolloClient:i,filmId:n});if(null===o||void 0===o?void 0:o.userData){var r=o.userData.folders||[];if(r.some((function(e){return(null===e||void 0===e?void 0:e.id)===t}))){var l=Object(f.a)(o,(function(e){e.userData&&(e.userData.folders=r.filter((function(e){return(null===e||void 0===e?void 0:e.id)!==t})))}));y({apolloClient:i,filmId:n,data:l,logger:a})}}},S=i("d/yK"),j=r.a.mark(h);function h(e){var t,i,n,a,o,l,s;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.folderId,i=e.apolloClient,n=e.filmId,null===(a=O({apolloClient:i,filmId:n}))||void 0===a?void 0:a.userData){r.next=4;break}return r.abrupt("return");case 4:if(o=a.userData.folders||[],!o.some((function(e){return(null===e||void 0===e?void 0:e.id)===t}))){r.next=8;break}return r.abrupt("return");case 8:return r.next=10,Object(d.i)(u.d,{folderId:t});case 10:return l=r.sent,s=Object(f.a)(a,(function(e){e.userData&&(e.userData.folders=o.concat({__typename:S.p.Folder,id:t,name:l||""}))})),r.t0=y,r.t1=i,r.t2=n,r.t3=s,r.next=18,Object(d.f)(m.a);case 18:r.t4=r.sent,r.t5={apolloClient:r.t1,filmId:r.t2,data:r.t3,logger:r.t4},(0,r.t0)(r.t5);case 21:case"end":return r.stop()}}),j)}var R=r.a.mark(w);function w(e){var t,i,n,a,o;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(d.b)(u.a);case 2:return t=e.payload,i=t.filmId,n=t.folderId,a=t.operation,r.next=5,Object(d.b)(v.a);case 5:if(o=r.sent,a!==c.FolderOperation.Add){r.next=10;break}return r.next=9,Object(d.b)(h,{folderId:n,apolloClient:o,filmId:i});case 9:return r.abrupt("return");case 10:if(a!==c.FolderOperation.Remove){r.next=22;break}return r.t0=d.b,r.t1=I,r.t2=n,r.t3=o,r.t4=i,r.next=18,Object(d.f)(m.a);case 18:return r.t5=r.sent,r.t6={folderId:r.t2,apolloClient:r.t3,filmId:r.t4,logger:r.t5},r.next=22,(0,r.t0)(r.t1,r.t6);case 22:case"end":return r.stop()}}),R)}var N=i("9T5q"),T=i("WZ32"),F=r.a.mark(_);function _(e){var t,i,n,a;return r.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,i=t.filmId,n=t.folderId,a=t.operation,o.next=4,Object(T.g)({movieId:i,folderId:n,operation:a,movieType:N.MovieTypes.Film});case 4:return o.abrupt("return",o.sent);case 5:case"end":return o.stop()}}),F)}var E=i("zjfJ"),C=r.a.mark(D);function M(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function x(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?M(Object(i),!0).forEach((function(t){Object(E.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):M(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function D(e){var t,i,n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,i=t.operation,n=Object(s.g)(x({},t,{operation:i===c.FolderOperation.Add?c.FolderOperation.Remove:c.FolderOperation.Add})),a.next=5,Object(d.b)(w,n);case 5:case"end":return a.stop()}}),C)}var P=r.a.mark(A),B=80;function A(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.a)(B,(function(e){var t=e.payload;return"".concat(t.filmId).concat(t.folderId)}),s.g.type,w,_,D);case 2:case"end":return e.stop()}}),P)}var U=i("FhWZ"),L=r.a.mark(W);function V(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function z(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?V(Object(i),!0).forEach((function(t){Object(E.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):V(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function W(e){var t,i,n,a,o,l;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.userReviewId,i=e.votes,n=e.voting,r.next=3,Object(d.b)(v.a);case 3:if(a=r.sent,(null===(o=Object(U.c)({apolloClient:a,userReviewId:t}))||void 0===o?void 0:o.votes)&&o.userData){r.next=7;break}return r.abrupt("return");case 7:return l=Object(f.a)(o,(function(e){e.userData&&o.votes&&e.userData.__typename===S.p.UserReviewUserData&&(n&&(e.userData.voting=n),e.votes=z({},e.votes,{},i))})),r.t0=U.b,r.t1=t,r.t2=a,r.t3=l,r.next=14,Object(d.f)(m.a);case 14:r.t4=r.sent,r.t5={userReviewId:r.t1,apolloClient:r.t2,data:r.t3,logger:r.t4},(0,r.t0)(r.t5);case 17:case"end":return r.stop()}}),L)}var q=r.a.mark(K);function Y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function H(e){var t=e.rollbackVotes,i=e.userVoting,n=e.rollbackUserVoting,a=t.negativeCount,o=t.positiveCount;switch(i){case S.s.Helpful:o+=1;break;case S.s.Unhelpful:a+=1}switch(n){case S.s.Helpful:o=Math.max(0,o-1);break;case S.s.Unhelpful:a=Math.max(0,a-1)}return function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(i),!0).forEach((function(t){Object(E.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Y(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},t,{negativeCount:a,positiveCount:o})}function K(e){var t,i,n,a,o,l;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,i=t.userVoting,n=t.userReviewId,a=t.rollbackVotes,o=t.rollbackUserVoting,r.next=3,Object(d.b)(u.a);case 3:return l=H({rollbackVotes:a,userVoting:i,rollbackUserVoting:o}),r.next=6,Object(d.b)(W,{userReviewId:n,votes:l,voting:i});case 6:case"end":return r.stop()}}),q)}var Q=i("MQ1I"),Z=i("RixH"),G=r.a.mark(J);function J(e){var t,i,n,a,o,l,s;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,i=t.userReviewId,n=t.filmId,a=t.userId,o=t.userVoting,r.next=3,Object(d.b)(u.a);case 3:return r.next=5,Object(d.d)(1e3);case 5:if(l=Object(Q.getReactionTypeByUserVoting)(o)){r.next=8;break}throw new Error("voteType is invalid");case 8:return r.next=10,Object(d.b)(Z.a);case 10:return s=r.sent,r.next=13,s.voteReview({filmId:n,reviewId:i,userId:a,voteType:l});case 13:case"end":return r.stop()}}),G)}var $=r.a.mark(X);function X(e){var t,i,n,a;return r.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,i=t.userReviewId,n=t.rollbackVotes,a=t.rollbackUserVoting,o.next=3,Object(d.b)(W,{userReviewId:i,votes:n,voting:a});case 3:case"end":return o.stop()}}),$)}var ee=r.a.mark(te);function te(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.a)(100,(function(e){var t=e.payload,i=t.userReviewId,n=t.userId;return"".concat(i).concat(n)}),s.e.type,K,J,X);case 2:case"end":return e.stop()}}),ee)}var ie=r.a.mark(oe);function ne(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ae(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(i),!0).forEach((function(t){Object(E.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ne(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function oe(e){var t,i,n,a,o;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.filmId,i=e.vote,r.next=3,Object(d.b)(v.a);case 3:if(n=r.sent,a=O({apolloClient:n,filmId:t})){r.next=7;break}return r.abrupt("return");case 7:return o=Object(f.a)(a,(function(e){(null===e||void 0===e?void 0:e.userData)&&(e.userData.voting=i?ae({__typename:S.p.Vote},i):null)})),r.t0=y,r.t1=t,r.t2=n,r.t3=o,r.next=14,Object(d.f)(m.a);case 14:r.t4=r.sent,r.t5={filmId:r.t1,apolloClient:r.t2,data:r.t3,logger:r.t4},(0,r.t0)(r.t5);case 17:case"end":return r.stop()}}),ie)}var re=r.a.mark(le);function le(e){var t,i,n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(d.b)(u.a);case 2:return t=e.payload,i=t.filmId,n=t.value,a.next=5,Object(d.b)(oe,{filmId:i,vote:{value:n>=0?n:null,votedAt:null}});case 5:case"end":return a.stop()}}),re)}var se=r.a.mark(de);function de(e){var t,i,n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,i=t.filmId,n=t.value,a.next=4,Object(T.h)({movieId:i,value:n});case 4:return a.abrupt("return",a.sent);case 5:case"end":return a.stop()}}),se)}var ce=r.a.mark(ue);function ue(e){var t,i,n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,i=t.filmId,n=t.rollbackVote,a.next=3,Object(d.b)(oe,{filmId:i,vote:n});case 3:case"end":return a.stop()}}),ce)}var ve=r.a.mark(fe),me=80;function fe(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.a)(me,(function(e){var t=e.payload;return String(t.filmId)}),s.h.type,le,de,ue);case 2:case"end":return e.stop()}}),ve)}var pe=i("LPUJ"),be=r.a.mark(Oe);function ke(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ge(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(i),!0).forEach((function(t){Object(E.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ke(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Oe(e){var t,i,n,a,o;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.filmId,i=e.expectation,r.next=3,Object(d.b)(v.a);case 3:if(n=r.sent,a=O({apolloClient:n,filmId:t})){r.next=7;break}return r.abrupt("return");case 7:return o=Object(f.a)(a,(function(e){(null===e||void 0===e?void 0:e.userData)&&(e.userData.expectation=ge({},e.userData.expectation,{__typename:S.p.MovieUserExpectation,value:i}))})),r.t0=y,r.t1=n,r.t2=t,r.t3=o,r.next=14,Object(d.f)(m.a);case 14:r.t4=r.sent,r.t5={apolloClient:r.t1,filmId:r.t2,data:r.t3,logger:r.t4},(0,r.t0)(r.t5);case 17:case"end":return r.stop()}}),be)}var ye=r.a.mark(Ie);function Ie(e){var t,i,n,a,o;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,i=t.expectation,n=t.filmId,a=t.discard,r.next=3,Object(d.b)(u.a);case 3:return o=Object(pe.a)(i,a),r.next=6,Oe({filmId:n,expectation:o});case 6:case"end":return r.stop()}}),ye)}var Se=r.a.mark(je);function je(e){var t,i,n,a;return r.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,i=t.expectation,n=t.filmId,a=t.discard,o.next=3,Object(pe.b)({id:n,rawExpectation:i,discard:a});case 3:case"end":return o.stop()}}),Se)}var he=r.a.mark(Re);function Re(e){var t,i,n;return r.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,i=t.filmId,n=t.rollbackExpectation,a.next=3,Oe({filmId:i,expectation:n});case 3:case"end":return a.stop()}}),he)}var we=r.a.mark(Ne);function Ne(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.a)(200,(function(e){var t=e.payload;return String(t.filmId)}),s.f.type,Ie,je,Re);case 2:case"end":return e.stop()}}),we)}var Te=i("9/Y8"),Fe=i("6YES"),_e=r.a.mark(Ce),Ee=r.a.mark(Me);function Ce(e){var t,i,n,a,o,l,s,c;return r.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,i=t.message,n=t.movieId,a=t.requestId,r.next=3,Object(d.h)(Object(Te.createRequest)({id:a}));case 3:return r.next=5,Object(d.b)(Fe.a);case 5:return o=r.sent,r.prev=6,r.next=9,Object(d.h)(Object(Te.updateRequestStatus)({id:a,status:Te.AppRequestStatuses.Pending}));case 9:return r.next=11,o.updateNote({filmId:n,message:i});case 11:return r.next=13,Object(d.b)(v.a);case 13:if(l=r.sent,null===(s=O({apolloClient:l,filmId:n}))||void 0===s?void 0:s.userData){r.next=17;break}return r.abrupt("return");case 17:return c=Object(f.a)(s,(function(e){if(null===e||void 0===e?void 0:e.userData){var t={__typename:S.p.UserMovieNote,value:i,makeDate:null};e.userData.note=t}})),r.t0=y,r.t1=l,r.t2=n,r.t3=c,r.next=24,Object(d.f)(m.a);case 24:return r.t4=r.sent,r.t5={apolloClient:r.t1,filmId:r.t2,data:r.t3,logger:r.t4},(0,r.t0)(r.t5),r.next=29,Object(d.h)(Object(Te.updateRequestStatus)({id:a,status:Te.AppRequestStatuses.Success}));case 29:r.next=35;break;case 31:return r.prev=31,r.t6=r.catch(6),r.next=35,Object(d.h)(Object(Te.updateRequestStatus)({id:a,status:Te.AppRequestStatuses.Failed}));case 35:case"end":return r.stop()}}),_e,null,[[6,31]])}function Me(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.k)(s.a.FilmNoteSubmitEffect,Ce);case 2:case"end":return e.stop()}}),Ee)}var xe=[a.b,A,te,fe,Ne,n.a,Me]},ESI9:function(e,t,i){e.exports={root:"styles_root__2veYq",rootInDark:"styles_rootInDark__B03Na styles_root__2veYq",rootInLight:"styles_rootInLight__1b6gD styles_root__2veYq",ticketIcon:"styles_ticketIcon__1KW_R",onlyIcon:"styles_onlyIcon__2c8Rv"}},F8Ip:function(e,t,i){e.exports={actionButtonsRoot:"styles_actionButtonsRoot__ji2Y1",ticketsButton:"styles_ticketsButton__3lC8h",watchOnlineButton:"styles_watchOnlineButton__1j89J",ticketsButtonWithWatchOnline:"styles_ticketsButtonWithWatchOnline__1IWoV",subOfferText:"styles_subOfferText__1g5x5"}},L8DZ:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("kdn0"),a=i("B277"),o=Object(n.b)({},(function(e){e.addCase(a.c,(function(e,t){var i=t.payload;e.blocksConfig=i}))}))},Phkd:function(e,t,i){e.exports={root:"styles_root__-bQM6"}},SCjx:function(e,t,i){e.exports={review:"styles_review__2du1d"}},VJ21:function(e,t,i){e.exports={title:"styles_title__1yvs9",filmRating:"styles_filmRating__3uyOe",buttonsAndDescriptionContainer:"styles_buttonsAndDescriptionContainer__24igj",buttonsContainer:"styles_buttonsContainer__UTIlG",hdContainer:"styles_hdContainer__3jCqC",watchOnlineButton:"styles_watchOnlineButton__1jZzr",watchOnlineDescription:"styles_watchOnlineDescription__2_w68",details:"styles_details__1785q",tableHeader:"styles_tableHeader__22f5C",filmCrew:"styles_filmCrew__UOwJw",userNote:"styles_userNote__16Z6a",awards:"styles_awards__1kIS0",sequelsPrequels:"styles_sequelsPrequels__3nzP7",productionStatus:"styles_productionStatus__2QDuV"}},ZlH5:function(e,t,i){e.exports={originalTitle:"styles_originalTitle__31aMS",originalTitleSmall:"styles_originalTitleSmall__3HVQm"}},ZmC0:function(e,t,i){"use strict";i.d(t,"a",(function(){return D})),i.d(t,"b",(function(){return P}));var n,a=i("VtSi"),o=i.n(a),r=i("zygG"),l=i("OrNH"),s=i("9vgG"),d=i("H/7H"),c=i("MRcq"),u=i("B277"),v=i("WZ32"),m=i("Ag3s"),f=i("1vmJ"),p=i("Fi4P"),b=i("fGyu"),k=i("j/kK"),g=i("zjfJ"),O=i("5QFK"),y=i("9LhE"),I=i("w++g"),S=i("C9RK"),j=i("d/yK"),h=i("PzpK"),R=i("DeaZ"),w=i("iGtG"),N=Object(y.a)((n={},Object(g.a)(n,O.BlocksTypes.MovieCriticReviews,(function(e){var t,i;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.filmId,i=e.apolloClient,n.prev=1,n.next=4,o.a.awrap(i.query({query:S.FILM_CRITICS_REVIEWS_QUERY,variables:{filmId:t,criticReviewsLimit:I.MOVIE_PAGE_CRITIC_REVIEWS_CHUNK_SIZE}}));case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(1);case 8:case"end":return n.stop()}}),null,null,[[1,6]],Promise)})),Object(g.a)(n,O.BlocksTypes.MovieFacts,(function(e){var t,i;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.filmId,i=e.apolloClient,n.prev=1,n.next=4,o.a.awrap(i.query({query:h.a,variables:{filmId:t,triviasType:j.o.Fact,triviasLimit:I.TRIVIAS_INITIAL_CHUNK_SIZE}}));case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(1);case 8:case"end":return n.stop()}}),null,null,[[1,6]],Promise)})),Object(g.a)(n,O.BlocksTypes.MovieBloopers,(function(e){var t,i;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.filmId,i=e.apolloClient,n.prev=1,n.next=4,o.a.awrap(i.query({query:h.a,variables:{filmId:t,triviasType:j.o.Blooper,triviasLimit:I.TRIVIAS_INITIAL_CHUNK_SIZE}}));case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(1);case 8:case"end":return n.stop()}}),null,null,[[1,6]],Promise)})),Object(g.a)(n,O.BlocksTypes.MovieUserReviews,(function(e){var t,i,n;return o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.filmId,i=e.apolloClient,n=e.isAuthorized,a.prev=1,a.next=4,o.a.awrap(i.query({query:S.FILM_USERS_REVIEWS_QUERY,variables:{filmId:t,userReviewsLimit:I.REVIEWS_PAGINATED_LIST_SIZE,userReviewsOrderBy:I.REVIEWS_PAGINATED_LIST_DEFAULT_ORDER,withUserData:n}}));case 4:a.next=8;break;case 6:a.prev=6,a.t0=a.catch(1);case 8:case"end":return a.stop()}}),null,null,[[1,6]],Promise)})),Object(g.a)(n,O.BlocksTypes.MovieSimilarFilms,(function(e){var t,i,n;return o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.filmId,i=e.apolloClient,n=e.isAuthorized,a.prev=1,a.next=4,o.a.awrap(i.query({query:w.a,variables:{filmId:t,similarMoviesLimit:I.SIMILAR_MOVIES_LIMIT,withUserData:n}}));case 4:a.next=8;break;case 6:a.prev=6,a.t0=a.catch(1);case 8:case"end":return a.stop()}}),null,null,[[1,6]],Promise)})),Object(g.a)(n,O.BlocksTypes.MovieMediaPosts,(function(e){var t,i;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.filmId,i=e.apolloClient,n.prev=1,n.next=4,o.a.awrap(i.query({query:R.a,variables:{filmId:t,mediaPostsLimit:I.MEDIA_POSTS_CHUNK_SIZE}}));case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(1);case 8:case"end":return n.stop()}}),null,null,[[1,6]],Promise)})),Object(g.a)(n,O.BlocksTypes.MovieTrailersAndTeasers,(function(e){var t,i;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.filmId,i=e.apolloClient,n.prev=1,n.next=4,o.a.awrap(i.query({query:S.FILM_TRAILERS_QUERY,variables:{filmId:t}}));case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(1);case 8:case"end":return n.stop()}}),null,null,[[1,6]],Promise)})),Object(g.a)(n,O.BlocksTypes.MovieListsRelations,(function(e){var t,i;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.filmId,i=e.apolloClient,n.prev=1,n.next=4,o.a.awrap(i.query({query:S.FILM_LIST_RELATIONS_QUERY,variables:{filmId:t,movieListsRelationsLimit:I.MOVIE_LIST_RELATION_CHUNK_SIZE}}));case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(1);case 8:case"end":return n.stop()}}),null,null,[[1,6]],Promise)})),Object(g.a)(n,O.BlocksTypes.MovieSoundtrack,(function(e){var t,i;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.filmId,i=e.apolloClient,n.prev=1,n.next=4,o.a.awrap(i.query({query:S.FILM_SOUNDTRACK_QUERY,variables:{filmId:t,soundtrackLimit:I.FILM_LIST_SOUNDTRACK_CHUNK_SIZE}}));case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(1);case 8:case"end":return n.stop()}}),null,null,[[1,6]],Promise)})),n)),T=i("8Hq5"),F=o.a.mark(_);function _(e){var t,i,n,a,r,s;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.filmId,i=e.isAuthorized,n=e.forceBlocksPreload,a=void 0!==n&&n,r=k.a,o.next=4,Object(l.h)(Object(u.c)(r));case 4:return o.next=6,Object(T.a)();case 6:return s=o.sent,o.next=9,N({blocksConfig:[].concat(Object(b.a)(r.additionalInformation),Object(b.a)(r.sidebar)),variables:{filmId:t,apolloClient:s,isAuthorized:i},forceBlocksPreload:a});case 9:case"end":return o.stop()}}),F)}var E=o.a.mark(C);function C(e){var t,i,n,a,r;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.filmId,i=e.isAuthorized,n=e.kpCityId,o.next=3,Object(T.a)();case 3:return a=o.sent,r=null,o.prev=5,o.next=8,a.query({query:S.FILM_BASE_INFO_QUERY,variables:{filmId:t,withUserData:i,kpCityId:n||null},errorPolicy:"all"});case 8:r=o.sent,o.next=13;break;case 11:o.prev=11,o.t0=o.catch(5);case 13:return o.abrupt("return",r);case 14:case"end":return o.stop()}}),E,null,[[5,11]])}var M=o.a.mark(D),x=o.a.mark(P);function D(e){var t,i,n,a,u,b,k,g;return o.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.filmId,o.next=3,Object(l.b)(d.createSessionIfNotExistSaga,e);case 3:return o.next=5,Object(l.b)(p.a);case 5:return o.next=7,Object(l.h)(Object(c.c)({platforms:f.b}));case 7:return o.next=9,Object(l.i)(d.selectIsAuthorized);case 9:return i=o.sent,o.next=12,Object(l.i)(d.selectIsRobot);case 12:return n=o.sent,o.next=15,Object(l.i)(d.selectUserKpCityId);case 15:return a=o.sent,o.next=18,Object(l.a)([C({filmId:t,isAuthorized:i,kpCityId:a}),_({filmId:t,isAuthorized:i,forceBlocksPreload:n}),Object(v.a)({movieId:t}),Object(m.b)(),Object(s.fetchConfig)()]);case 18:return u=o.sent,b=Object(r.a)(u,1),k=b[0],g={baseInfo:k},o.abrupt("return",g);case 23:case"end":return o.stop()}}),M)}function P(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.l)(u.d.type,D);case 2:case"end":return e.stop()}}),x)}},amtH:function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"a",(function(){return s})),i.d(t,"c",(function(){return c})),i.d(t,"d",(function(){return v}));var n=i("kdn0"),a=i("o4DS"),o=Object(n.a)(a.a.SetUserRatingEffect),r=i("zjfJ");function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var s=function(e){return o(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){Object(r.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},e,{value:-1}))};function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var c=function(e){return o(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach((function(t){Object(r.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},e,{value:0}))};function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}var v=function(e){return o(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){Object(r.a)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({},e,{value:-1}))}},cDcd:function(e,t){e.exports=React},csgz:function(e,t,i){e.exports={root:"styles_root__2s5G7",ratingBar:"styles_ratingBar__14lZB",rootSingleRating:"styles_rootSingleRating__2gCE8"}},dOIt:function(e,t,i){"use strict";i.d(t,"getFilmPageModule",(function(){return d}));var n=i("zjfJ"),a=i("1vmJ"),o=i("DzDZ"),r=i("L8DZ"),l=i("B277");i.d(t,"deleteFilmUserRatingEffect",(function(){return l.b})),i.d(t,"filmPageFetchInitialPropsEffect",(function(){return l.d})),i.d(t,"filmPageSetUserReviewVoteEffect",(function(){return l.e})),i.d(t,"setFilmExpectationReactionEffect",(function(){return l.f})),i.d(t,"setFilmFolderEffect",(function(){return l.g})),i.d(t,"setFilmUserRatingEffect",(function(){return l.h})),i.d(t,"setFilmWatchedEffect",(function(){return l.i})),i.d(t,"unsetFilmWatchedEffect",(function(){return l.k}));var s=i("oEWk");i.d(t,"selectFilmPageAdditionalInformationBlockConfig",(function(){return s.a})),i.d(t,"selectFilmPageTouchBlockConfig",(function(){return s.c}));i("sy9j");var d=function(){return{id:a.a,sagas:o.a,reducerMap:Object(n.a)({},a.a,r.a)}}},faye:function(e,t){e.exports=ReactDOM},gnpC:function(e,t,i){e.exports={root:"styles_root__2kdBQ"}},i2v3:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("kdn0"),a=i("o4DS"),o=Object(n.a)(a.a.SetExpectationReactionEffect)},iGtG:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"FilmSimilarMovies"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"filmId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Long"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"similarMoviesLimit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"10"},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"withUserData"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"film"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"filmId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userRecommendations"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"similarMoviesLimit"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"movie"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"russian"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"english"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"original"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"countries"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"poster"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarsUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"fallbackUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"genres"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"rating"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"expectation"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isActive"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"kinopoisk"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"count"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isActive"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"userData"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"withUserData"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"voting"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"value"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"onlineViewOptions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"textToDisplay"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isAvailableOnline"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isPurchased"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"subscriptionPurchaseTag"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"accessType"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Film"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"productionYear"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Video"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"productionYear"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TvSeries"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"releaseYears"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"start"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"end"},arguments:[],directives:[]}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"TvShow"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"releaseYears"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"start"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"end"},arguments:[],directives:[]}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MiniSeries"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"releaseYears"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"start"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"end"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"types"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"total"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:2806,source:{body:"\n    query FilmSimilarMovies(\n        $filmId: Long!\n        $similarMoviesLimit: Int = 10\n        $withUserData: Boolean = false\n    ) {\n        film(id: $filmId) {\n            id\n            userRecommendations(limit: $similarMoviesLimit) {\n                items {\n                    movie {\n                        id\n                        title {\n                            russian\n                            english\n                            original\n                        }\n                        countries {\n                            id\n                            name\n                        }\n                        poster {\n                            avatarsUrl\n                            fallbackUrl\n                        }\n                        genres {\n                            id\n                            name\n                            slug\n                        }\n                        rating {\n                            expectation {\n                                value\n                                count\n                                isActive\n                            }\n                            kinopoisk {\n                                value\n                                count\n                                isActive\n                            }\n                        }\n                        userData @include(if: $withUserData) {\n                            voting {\n                                value\n                            }\n                        }\n                        onlineViewOptions {\n                            textToDisplay\n                            isAvailableOnline\n                            isPurchased\n                            subscriptionPurchaseTag\n                            accessType\n                        }\n\n                        ... on Film {\n                            productionYear\n                        }\n                        ... on Video {\n                            productionYear\n                        }\n                        ... on TvSeries {\n                            releaseYears {\n                                start\n                                end\n                            }\n                        }\n                        ... on TvShow {\n                            releaseYears {\n                                start\n                                end\n                            }\n                        }\n                        ... on MiniSeries {\n                            releaseYears {\n                                start\n                                end\n                            }\n                        }\n                    }\n                    types\n                }\n                total\n            }\n        }\n    }\n",name:"GraphQL request",locationOffset:{line:1,column:1}}}}},iNWU:function(e,t,i){e.exports={title:"styles_title__d5UEr"}},iuVV:function(e,t,i){"use strict";i("1vmJ")},"j/kK":function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return F})),i.d(t,"d",(function(){return E})),i.d(t,"c",(function(){return C}));var n,a=i("zjfJ"),o=i("5QFK"),r=(n={},Object(a.a)(n,o.EncyclopedicPageBlockSections.AdditionalInformation,[{type:o.BlocksTypes.MovieSuperBanner,params:{}},{type:o.BlocksTypes.MovieDetails,params:{}},{type:o.BlocksTypes.MovieSimilarFilms,params:{useClientRender:!0}},{type:o.BlocksTypes.MovieTrailersAndTeasers,params:{useClientRender:!0}},{type:o.BlocksTypes.MovieFacts,params:{useClientRender:!0}},{type:o.BlocksTypes.MovieBloopers,params:{useClientRender:!0}},{type:o.BlocksTypes.MovieMediaPosts,params:{useClientRender:!0}},{type:o.BlocksTypes.MovieTodayInCinema,params:{useClientRender:!0}},{type:o.BlocksTypes.MovieCriticReviews,params:{useClientRender:!0}},{type:o.BlocksTypes.MovieUserReviews,params:{useClientRender:!0}}]),Object(a.a)(n,o.EncyclopedicPageBlockSections.Sidebar,[{type:o.BlocksTypes.FilmBanner200x200,params:{}},{type:o.BlocksTypes.MovieFriends,params:{useClientRender:!0}},{type:o.BlocksTypes.MovieListsRelations,params:{useClientRender:!0}},{type:o.BlocksTypes.MovieSoundtrack,params:{useClientRender:!0}},{type:o.BlocksTypes.Banner300x600,params:{}}]),Object(a.a)(n,o.EncyclopedicPageBlockSections.Touch,[{type:o.BlocksTypes.MovieSequelFilms,params:{useClientRender:!0}},{type:o.BlocksTypes.MovieTrailersAndTeasers,params:{useClientRender:!0}},{type:o.BlocksTypes.MovieTouchRating,params:{useClientRender:!0}},{type:o.BlocksTypes.MovieAwards,params:{useClientRender:!0}},{type:o.BlocksTypes.MovieActors,params:{useClientRender:!0}},{type:o.BlocksTypes.MovieCreators,params:{useClientRender:!0}},{type:o.BlocksTypes.MovieMediaPosts,params:{useClientRender:!0}},{type:o.BlocksTypes.MovieFacts,params:{useClientRender:!0}},{type:o.BlocksTypes.MovieBloopers,params:{useClientRender:!0}},{type:o.BlocksTypes.MovieSimilarFilms,params:{useClientRender:!0}},{type:o.BlocksTypes.MovieUserReviews,params:{useClientRender:!0}}]),n),l=i("cDcd"),s=i.n(l),d=i("O94r"),c=i.n(d),u=i("7JmY"),v=i("w++g"),m=i("GaWJ"),f=i("Phkd"),p=i.n(f),b=s.a.createElement,k=function(e){var t=e.className;return b("a",{href:m.routes.getUrl(m.SpecialsRoutes.Imax),target:"_blank",rel:"noopener noreferrer",className:c()(p.a.root,t),"data-tid":"3d28821c"},"IMAX")},g=i("rtUw"),O=i.n(g),y=s.a.createElement,I=function(e){var t,i=e.className,n=e.title,o=e.isTvOnly,r=e.isImax,s=e.colorScheme,d=void 0===s?u.BlocksColorSchemes.Light:s,m=Object(l.useMemo)((function(){return Object(v.presentMainTitle)(n)}),[n]),f=Object(l.useMemo)((function(){var e=Object(v.getContentType)(o);return e?" (".concat(e,")"):void 0}),[o]);return y(u.EncyclopedicPageTitle,{className:c()(i,O.a.root,(t={},Object(a.a)(t,O.a.rootMedium,!!m&&m.length>70),Object(a.a)(t,O.a.rootSmall,!!m&&m.length>110),t)),colorScheme:d,itemProp:"name"},y("span",{className:O.a.title,"data-tid":"67e47501"},m,f),r&&y("span",{className:O.a.imaxContainer,"data-tid":"67e47501"},y(k,{className:O.a.imax})))},S=i("ZlH5"),j=i.n(S),h=s.a.createElement,R=function(e){var t=e.className,i=e.title,n=e.restriction,o=e.colorScheme,r=void 0===o?u.BlocksColorSchemes.Light:o,l=Object(v.presentOriginalTitle)(i);return l||(null===n||void 0===n?void 0:n.age)?h(u.EncyclopedicPageSubtitle,{className:t,colorScheme:r},l&&h("span",{className:c()(j.a.originalTitle,Object(a.a)({},j.a.originalTitleSmall,l.length>70)),"data-tid":"3bbf3321"},l),(null===n||void 0===n?void 0:n.age)&&h(v.RestrictionNameplate,{age:n.age,colorScheme:r})):null},w=i("iNWU"),N=i.n(w),T=s.a.createElement,F=function(e){var t,i=e.className,n=e.film,a=e.colorScheme,o=void 0===a?u.BlocksColorSchemes.Light:a;return T("div",{className:c()(i),"data-tid":"742528af"},n.title&&T(s.a.Fragment,null,T(I,{id:n.id,title:n.title,isImax:(null===(t=n.releaseOptions)||void 0===t?void 0:t.isImax)||!1,className:N.a.title,isTvOnly:n.isTvOnly,colorScheme:o}),T(R,{title:n.title,restriction:n.restriction,colorScheme:o})))},_=i("GQvm"),E=Object(_.defaultMemoize)((function(e){if(e)return{text:e.toString(),link:m.routes.getUrl(m.SelectionsRoutes.SeoPageWithYear,{year:e},{quick_filters:"films"})}})),C={mediaPostsBlockTitle:"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u043e \u0444\u0438\u043b\u044c\u043c\u0435",seoDescription:"\u0412\u0441\u0451 \u043e \u0444\u0438\u043b\u044c\u043c\u0435: \u0434\u0430\u0442\u044b \u0432\u044b\u0445\u043e\u0434\u0430, \u0430\u043a\u0442\u0435\u0440\u044b, \u0442\u0440\u0435\u0439\u043b\u0435\u0440\u044b, \u0444\u043e\u0442\u043e. \u041e\u0442\u0437\u044b\u0432\u044b \u0437\u0440\u0438\u0442\u0435\u043b\u0435\u0439 \u0438 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0440\u0435\u0446\u0435\u043d\u0437\u0438\u0438. \u0420\u0435\u0439\u0442\u0438\u043d\u0433. \u0418\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u044b\u0435 \u0444\u0430\u043a\u0442\u044b \u0438 \u043e\u0448\u0438\u0431\u043a\u0438 \u0432 \u0444\u0438\u043b\u044c\u043c\u0435.",touchMediaPostsBlockTitle:"\u041c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b"}},ndTU:function(e,t,i){e.exports={root:"styles_root__2nGVp"}},o4DS:function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e.FetchInitialProps="film-page/FETCH_INITIAL_PROPS",e.AddBlocksConfig="film-page/ADD_BLOCKS_CONFIG",e.SetFolderEffect="film-page/SET_FOLDER_EFFECT",e.SetUserReviewVoteEffect="film-page/SET_USER_REVIEW_VOTE_EFFECT",e.SetUserRatingEffect="film-page/SET_USER_RATING_EFFECT",e.SetExpectationReactionEffect="film-page/SET_EXPECTATION_REACTION_EFFECT",e.FilmNoteSubmitEffect="film-page/SUBMIT_FILM_NOTE_EFFECT"}(n||(n={}))},oEWk:function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return l})),i.d(t,"c",(function(){return s}));var n=i("5QFK"),a=i("1vmJ"),o=function(e){return function(e){return e[a.a]}(e).blocksConfig},r=function(e){var t;return null===(t=o(e))||void 0===t?void 0:t[n.EncyclopedicPageBlockSections.Sidebar]},l=function(e){var t;return null===(t=o(e))||void 0===t?void 0:t[n.EncyclopedicPageBlockSections.AdditionalInformation]},s=function(e){var t;return null===(t=o(e))||void 0===t?void 0:t[n.EncyclopedicPageBlockSections.Touch]}},rtUw:function(e,t,i){e.exports={root:"styles_root__dt4P-",rootMedium:"styles_rootMedium__1-Ytt",rootSmall:"styles_rootSmall__2R_vc",imaxContainer:"styles_imaxContainer__2--SL",imax:"styles_imax__gSmQ_",title:"styles_title__2l0HH"}},sy9j:function(e,t,i){"use strict";i("iuVV"),i("+1kG")},zs4Q:function(e,t,i){e.exports={root:"styles_root__3BHiJ",basicMediaSection:"styles_basicMediaSection__3moOZ",basicInfoSection:"styles_basicInfoSection__26fFZ",basicInfoSectionDark:"styles_basicInfoSectionDark__3vQ02",basicMediaSectionDark:"styles_basicMediaSectionDark__14sFB",sidebarSection:"styles_sidebarSection__1Nr8c",additionalInformationSection:"styles_additionalInformationSection__2Ip8Y",videoContainer:"styles_videoContainer__2oqe-",delimiterInDark:"styles_delimiterInDark__V3kAf",main:"styles_main__2rWxx"}}},[["CuJt",1,6,5,0,2,3,4,8,7,9,10,11]]]);
//# sourceMappingURL=https://kinopoisk-frontend-internal.s3.mds.yandex.net/kinopoisk/release/_next/static/IvSVZbspjN0Qfvt4XyBlY/pages/film.js.map